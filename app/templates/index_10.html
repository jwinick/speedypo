{% extends "base.html" %}
{% block app_content %}
<div id='content' class='reversed-primary-color'>
    <div id='dashboard' class='hidden container-fluid overflow-auto section'>
            <div class='row'>
            <div id='dashboard_controls' class='col-lg-2 col-0 d-none d-lg-block d-flex justify-content-center align-items-start' style='background-color: #f1f1f1;'>
                <div class='container overflow-hidden mt-4 px-3'>
                    <ul class="nav flex-column">
                      <hr>
                      <li class="nav-item py-3">
                        <a class="nav-link nav_item view view_new_order" href="#">New PO <i class="fal fa-pencil"></i></a>
                      </li>
                      <hr>
                      <li class="nav-item py-3">
                        <a class="nav-link nav_item" href="#">New SpeedyPO <i class="fal fa-rocket-launch"></i></a>
                      </li>
                      <hr>
                      <li class="nav-item py-3">
                        <a class="nav-link nav_item" href="#">Supplier setup <i class="fal fa-address-card"></i></a>
                      </li>
                      <hr>
                      <li class="nav-item py-3">
                        <a class="nav-link nav_item" href="#">SKU setup <i class="fal fa-forklift"></i></a>
                      </li>
                      <hr>
                      <li class="nav-item py-3">
                        <a class="nav-link nav_item" href="#">Support <i class="fal fa-info-square"></i></a>
                      </li>
                      <hr>
                    </ul>
                </div>
            </div>
            <div id='dashboard_body' class='col-12 col-lg-10'>
                <div class='row g-4 mt-4'>
                    <div id='simple_company' class='dashboard_item col-12 col-sm-6 col-xl-4 px-3'>
                        <div class='body simple-border h-100 p-3 overflow-auto'>
                            <div class='d-flex justify-content-between'>
                              <p class='header view_company'>
                              Company <i class='fal fa-store'></i>
                              </p>

                              <p class='bigger view view_company'>
                                <i class='fal fa-external-link-square'></i>
                            </p>
                            </div>
                            <div class='row pt-3 mt-3 pt-sm-5 mt-sm-4'>
                                <div class='col-12 col-lg-6 d-flex justify-content-center align-items-center logo'>
                                </div>
                                <div class='col-12 col-lg-6 py-5 py-lg-0 d-flex align-items-center justify-content-center'>
                                    <p class='fs-5 name'></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id='simple_orders' class='dashboard_item col-12 col-sm-6 col-xl-4 px-3'>
                        <div class='body simple-border h-100 p-3 overflow-auto'>
                          <div class='d-flex justify-content-between mb-5'>
                            <p class='header view_orders'>
                            POs <i class='fal fa-file-invoice'></i>
                            </p>
                            <p class='add'>
                            <i class='fal fa-plus-square add'></i>
                            </p>
                          </div>
                          <div class='col-12'>
                                <p class='fs-5 text-start'>Recent POs:</p>
                            </div>
                          <table class='table table-sm'>
                            <thead>
                              <tr>
                                <th scope="col">Supplier</th>
                                <th scope="col">Order ID</th>
                                <th scope="col">Created</th>
                              </tr>
                            </thead>
                            <tbody>
                            </tbody>
                          </table>
                        </div>
                    </div>
                    <div id='simple_calendar' class='dashboard_item col-12 col-sm-6 col-xl-4 px-3'>
                        <div class='body simple-border h-100 p-3 overflow-auto'>
                            <div class='d-flex justify-content-between'>
                              <p class='header view_calendar'>
                              Calendar <i class='fal fa-calendar-alt'></i>
                              </p>
                              <p class='bigger view view_calendar'>
                              <i class="fal fa-external-link-square"></i>
                            </p>

                            </div>
                            <div class='row d-flex justify-content-evenly pt-3 mt-3 pt-sm-5 mt-sm-4'>
                                <div class='p-3 col-12 col-lg-4 d-flex justify-content-center'>
                                    <p class='sub_header text-center'><i class="fal fa-truck"></i><br>Pending:<br><span class='pending'>0</span><p>
                                </div>
                                <div class='p-3 col-12 col-lg-4 d-flex justify-content-center'>
                                    <p class='sub_header text-center'><i class="fal fa-shipping-fast"></i></i><br>Shipped:<br><span class='shipped'>0</span><p>
                                </div>
                                <div class='p-3 col-12 col-lg-4 d-flex justify-content-center'>
                                    <p class='sub_header text-center'><i class="fal fa-shipping-timed"></i><br>Late:<br><span class='late'>0</span><p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id='simple_suppliers' class='dashboard_item col-12 col-sm-6 col-xl-4 px-3'>
                        <div class='body simple-border h-100 p-3 overflow-auto'>
                            <div class='d-flex justify-content-between mb-5'>
                              <p class='header view_suppliers'>
                              Suppliers <i class='fal fa-building'></i>
                              </p>
                              <p class='add'>
                                <i class='fal fa-plus-square add'></i>
                            </p>

                            </div>
                            <div class='col-12'>
                                <p class='fs-5 text-start'>Frequent suppliers:</p>
                            </div>
                            <table class='table table-sm '>
                              <thead>
                                <tr>
                                  <th scope="col">Supplier</th>
                                  <th scope="col">SKUs</th>
                                  <th scope="col">Orders</th>
                                </tr>
                              </thead>
                              <tbody></tbody>
                            </table>
                        </div>
                    </div>
                  <div id='simple_skus' class='dashboard_item col-12 col-sm-6 col-xl-4 px-3'>
                    <div class='body simple-border h-100 p-3 overflow-auto'>
                        <div class='d-flex justify-content-between mb-5'>
                          <p class='header view_skus'>
                          SKUs <i class='fal fa-tools'></i>
                          </p>
                          <p class='add'>
                            <i class='fal fa-plus-square add'></i>
                        </p>

                        </div>
                        <div class='col-12'>
                            <p class='fs-5 text-start'>Frequent SKUs:</p>
                        </div>
                        <table class='table table-sm'>
                          <thead>
                            <tr>
                              <th scope="col">SKU</th>
                              <th scope="col">Supplier</th>
                              <th scope="col">Orders</th>
                            </tr>
                          </thead>
                          <tbody></tbody>
                        </table>
                    </div>
                  </div>
                  <div id='simple_groups' class='dashboard_item col-12 col-sm-6 col-xl-4 px-3'>
                        <div class='body simple-border h-100 p-3 overflow-auto'>
                            <div class='d-flex justify-content-between mb-5'>
                              <p class='header view_groups'>
                              Groups <i class='fal fa-object-group'></i>
                              </p>
                              <p class='add'>
                                <i class='fal fa-plus-square add'></i>
                            </p>
                            </div>
                            <div class='col-12'>
                                <p class='fs-5 text-start'>Frequent groups:</p>
                            </div>
                            <div class='row list_groups'>
                            </div>
                            <div class='col-12 group_count'>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id='groups' class='section hidden container-fluid overflow-auto'>
        <div class='row pt-4 pb-0 sections'>
        <div id='list_groups' class='col-12 list_groups'>
          <div class='col-12 d-flex justify-content-between'><p class='fs-2 p-3 fw-bold m-0 back back_dashboard' style='cursor: pointer;'>
                  <i class="fas fa-arrow-alt-square-left"></i> Back
                </p>
              </div>
          <div id='speedy_groups_list' class='row p-3'></div>
          <p id='speedy_groups_count' class='text-center fs-6'></p>
        </div>
        <div class='col-12 list_skus hidden'>
          <div>
            <div class='hidden'>
              <span id='group_id'></span>
            </div>
          </div>
          <div class='col-12 d-flex justify-content-between'>
            <p class='fs-2 p-3 fw-bold m-0 back' style='cursor: pointer;'>
              <i class="fas fa-arrow-alt-square-left"></i> Back
            </p>
          </div>

          <h1 class='display-4 reversed-primary-color group_name col-12 text-center py-4'></h1>
          <div class='row'>
            <div id='rename_group_panel' class='col-12 hidden'>
              <div class='col-12 d-flex justify-content-center'>
              <div class='row g-4'>
              <div class='col-12 d-flex justify-content-end'><p class='fs-4 close_rename' style='cursor: pointer;'>Close <i class="fas fa-window-close"></i></p></div>
              <label for='rename_group' class='form-label fs-3'>Enter new name:</label>
              <input class="form-control form-control-lg" type="text" placeholder="" aria-label=".form-control-lg example" id='rename_group'></input>
              <button class='primary-button save_rename btn col-6 offset-3' type='button'>Save <i class="fas fa-save"></i></button>
              </div>
            </div>
            </div>
          </div>
          <div class='row py-3'>
            <div class='col-sm-4 col-12 p-3'>
              <button class="simple-button flip btn btn-lg new_speedy_po"  type="button"><p class="m-0 fs-4">New SpeedyPO <i class="far fa-fire-alt" style='color: red !important;'></i></p></button>
            </div>
            <div class='col-sm-4 col-6 p-3'>
              <button class="simple-button flip btn btn-lg rename_group"  type="button"><p class="m-0 fs-4">Rename group <i class="fas fa-edit"></i></p></button>
            </div>
            <div class='col-sm-4 col-6 p-3'>
              <button class="simple-button flip btn btn-lg delete_group"  type="button"><p class="m-0 fs-4">Delete group <i class="fas fa-trash-alt"></i></p></button>
            </div>
          </div>
          <table class='table py-3'>
            <thead>
              <tr>
                <th scope='col'>Supplier</th>
                <th scope='col'>SKU</th>
                <th scope='col'>Cost</th>
                <th scope='col'>Pack</th>
                <th scope='col'>Remove</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>
          <div class=col-12>
            <div class='d-flex justify-content-center '>
              <div class='px-5'>
                <button class="reversed-primary-button btn add_sku_group"  type="button"><p class="m-0">Add SKU <i class="fas fa-plus-square"></i></p></button>
              </div>
              <div class='px-5'>
                <button class="reversed-primary-button btn submit_add_sku_group hidden" type="button"><p class="m-0">Submit <i class="fas fa-check-square"></i></p></button>
              </div>
            </div>
          </div>
        </div>
        <div class='col-12 hidden speedy'>
          <div class='col-12 d-flex justify-content-between'>
            <p class='fs-2 p-3 fw-bold m-0 sub_back' style='cursor: pointer;'>
              <i class="fas fa-arrow-alt-square-left"></i> Back
            </p>
          </div>
          <h1>SpeedyPO</h1>
        </div>
        <div class='col-12 loading_spinner hidden'>
          <div class='row d-flex justify-content-center'>
            <div class="spinner-border reversed-primary-color" role="status">
                    <span class="visually-hidden">Loading...</span>
                  </div>
          </div>
        </div>
        <div class='group_form col-12 hidden'>
            <div class='col-12 reversed-primary-color d-flex justify-content-between' >
                <p class='fs-2 p-3 fw-bold m-0 back' style='cursor: pointer;'>
                  <i class="fas fa-arrow-alt-square-left"></i> Back
                </p>
                <p class='fs-2 p-3 fw-bold m-0 submit_form' style='cursor: pointer;'>
                 Submit <i class="fas fa-arrow-alt-square-right"></i>
                </p>
            </div>
            <div class='form_body'>
              <div id='group_form_new_group' class='my-5 col-12 col-sm-10 offset-sm-1 col-md-8 offset-md-2 col-lg-6 offset-lg-3 p-4 rounded-3' style='border-style:solid; border-color: #0038B8;'>

                <div class='col-12 p-3'>
                  <h1 class='display-3 text-center reversed-primary-color'>
                    Create new group <i class="fal fa-object-group "></i></h1>
                </div>
                <div class='form-floating col-6 offset-3'>
                  <input class='form-control name' id='group_form_name' placeholder="name"></input>
                  <label class='form-label' for=
                  group_form_name>Group name</label>
                  <div class='valid-feedback'>Looks good!</div>
                  <div class='invalid-feedback'>Please enter a group name!</div>

                </div>
                </div>
                <div id='group_form_skus' class='mt-5 col-12 col-sm-10 offset-sm-1 col-md-8 offset-md-2 col-lg-6 offset-lg-3 p-4 rounded-3 primary-border' >
                <div class='col-12 p-3'>
                  <h1 class='display-4 text-center reversed-primary-color'>
                    SKUs <i class="fal fa-tools "></i></h1>
                </div>
                <table class='table align-middle'>
                  <tbody>
                    <tr>
                      <th class='reversed-primary-color number' scope='row'>1
                      </th>
                      <td>
                        <select class='form-select select_supplier' aria-label='select_supplier'>
                          <option value='None' selected>Select supplier</option>
                        </select>
                        <div class='valid-feedback'>Looks good!</div>
                        <div class='invalid-feedback'>Please select a supplier!</div>
                      </td>
                      <td>
                        <select class='form-select select_sku' aria-label='select_sku'>
                          <option value='None' selected>Select SKU</option>
                        </select>
                        <div class='valid-feedback'>Looks good!</div>
                        <div class='invalid-feedback'>Please select a supplier!</div>
                      </td>
                      <td class='delete'>
                        <i class="fas fa-trash-alt reversed-primary-color" style='cursor:pointer;'></i>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <div class='col-12 d-flex justify-content-center'>
                <button class='primary-button add_sku btn' type='button' style='cursor:pointer;'>Add SKU <i class="fas fa-plus-square"></i></button>

                </div>
                </div>
                <div class='row d-flex justify-content-center my-4 loading_spinner'>
                  <div class="spinner-border reversed-primary-color hidden" role="status">
                    <span class="visually-hidden">Loading...</span>
                  </div>
                </div>
              </div>
          </div>
        </div>
    </div>
    <div id='calendar' class='section hidden container-fluid overflow-auto p-3'>
    <div class='row d-flex justify-content-between'>
        <div class='col-4 d-flex justify-content-start align-items-center'>
            <p class='fs-2 fw-bold back back_dashboard' style='cursor: pointer;'>
              <i class="fas fa-arrow-alt-square-left"></i> Back
            </p>
        </div>
        <div class='col-4 d-flex justify-content-center'>
            <button class="simple-button btn flip btn-lg view view_recurring col-12 h-100 p-sm-3 p-0" type='button'><p class='m-0'>Recurring <br><i class='fal fa-shipping-timed'></i></p></button>
        </div>
        <div class='col-4' style='border-style:solid;'>
            <div class='col-12'>
                <p class='fs-5 fw-bold text-center'>
                    <u>Key</u>
                </p>
            </div>
            <div class='col-12'>
                <p class='text-center'>
                    MABD: <i class='fal fa-parachute-box'></i>
                </p>
            </div>
        </div>
        <div class="auto-jsCalendar classic-theme table-responsive p-3" data-month-format="month YYYY"></div>
    </div>

    </div>
    <div id='recurring' class='section hidden container-fluid overflow-auto p-3'>
        <div class='col-12 d-flex justify-content-between'>
          <p class='fs-2 p-3 fw-bold m-0 back back_calendar' style='cursor: pointer;'>
            <i class="fas fa-arrow-alt-square-left"></i> Back
          </p>
        </div>
        <div class='row d-flex flex-row-reverse py-4'>
            <button class="reversed-primary-button btn btn-lg add col-12 col-sm-3" type="button"><p class="m-0">New rule <i class="fal fa-shipping-timed"></i></p></button>
          </div>
        <div class='col-12'>
              <div id='new_recurring' class='hidden'>
                  <div class='mb-3'>
                      <label for="select_recurring_order_id" class="form-label">Select Order ID</label>
                      <select id='select_recurring_order_id' class='form-select' aria-label="select order">
                      </select>
                  </div>
                  <div class='mb-3'>
                      <label for="select_recurring_freq" class="form-label">Select Frequency</label>
                      <select id='select_recurring_freq' class='form-select' aria-label="select freq">
                          <option value='0'>Weekly</option>
                          <option value="1">Monthly</option>
                      </select>
                  </div>
              </div>
        </div>
        <div class='col-12'>
              <table id='my_recurring_orders' class='table'>
                  <thead>
                      <th scope='col'>Action</th>
                      <th scope='col'>Order ID</th>
                      <th scope='col'>Supplier Name</th>
                      <th scope='col'>Frequency</th>
                  </thead>
                  <tbody id='my_recurring_orders_body'>
                  </tbody>
              </table>
        </div>
      </div>
    <div id='orders' class='section hidden container-fluid overflow-auto p-5'>
        <div class='row d-flex justify-content-between'>
            <div class='col-6 d-flex justify-content-start'>
                <p class='fs-2 fw-bold back back_dashboard' style='cursor: pointer;'>
                  <i class="fas fa-arrow-alt-square-left"></i> Back
                </p>
            </div>
          <button class="reversed-primary-button btn btn-lg add col-6 col-sm-3" type="button"><p class="m-0">New PO <i class="far fa-plus-square"></i></p></button>
        </div>
        <div class='col-12 py-3 mt-4'><h1 class='display-4 text-center'>POs <i class='fal fa-file-invoice'></i></h1></div>
        {% include '_table.html'%}
    </div>
    <div id='skus' class='section hidden container-fluid overflow-auto p-5'>
        <div class='row d-flex justify-content-between'>
            <div class='col-6 d-flex justify-content-start'>
                <p class='fs-2 fw-bold back back_dashboard' style='cursor: pointer;'>
                  <i class="fas fa-arrow-alt-square-left"></i> Back
                </p>
            </div>
          <button class="reversed-primary-button btn btn-lg add col-6 col-sm-3" type="button"><p class="m-0">New SKU <i class="far fa-plus-square"></i></p></button>
        </div>
        <div class='col-12 py-3 mt-4'><h1 class='display-4 text-center'>SKUs <i class='fal fa-tools'></i></h1></div>
        {% include '_table.html'%}
    </div>
    <div id='suppliers' class='section hidden container-fluid overflow-auto p-5'>
        <div class='row d-flex justify-content-between'>
            <div class='col-6 d-flex justify-content-start'>
                <p class='fs-2 fw-bold back back_dashboard' style='cursor: pointer;'>
                  <i class="fas fa-arrow-alt-square-left"></i> Back
                </p>
            </div>
          <button class="reversed-primary-button btn btn-lg view view_new_supplier col-6 col-sm-3" type="button"><p class="m-0">New Supplier <i class="far fa-plus-square"></i></p></button>
        </div>
        <div class='col-12 py-3 mt-4'><h1 class='display-4 text-center'>Suppliers <i class='fal fa-building'></i></h1></div>
        {% include '_table.html'%}
    </div>
    <div id='company' class='section hidden container-fluid overflow-auto p-5'>
        <span class='hidden' id='section_id'></span>
            <div class='row d-flex justify-content-between'>
                <div class='col-6 d-flex justify-content-start'>
                    <p class='fs-2 fw-bold back back_dashboard' style='cursor: pointer;'>
                      <i class="fas fa-arrow-alt-square-left"></i> Back
                    </p>
                </div>
                <div class='col-6 py-4'>
                    <div class='row d-flex justify-content-end align-items-center'>
                        <button class="primary-button btn edit col-6" type="button"><p class="m-0 fs-3">Edit <i class="fas fa-edit"></i></p></button>
                        <button class="primary-button btn cancel_edit hidden col-6 " type="button"><p class="m-0 fs-3">Cancel <i class="fas fa-times"></i></p></button>
                    </div>
                </div>
            </div>
            <div class='row sections p-3'>
                <div class='row company_form'>
                  <div class='col-12 col-sm-4'>
                    <button class='btn btn-lg simple-button flip recipients w-100 py-4' type='button'>More addresses <i class="fal fa-address-card"></i></button>
                    <div class='logo py-4'></div>
                    <div class='hidden py-4 change_logo'>
                      <label for='company_info_logo' class='form-label fs-4'>Change logo</label>
                      <input class="form-control logo file" id='company_logo' type="file" accept='image/*'></input>
                    </div>
                  </div>
                  <div class='col-12 col-sm-8'>
                    <form class='row gy-4 company_info' style='color:#000;'>
                      <div class="alert alert-danger text-center error hidden" role="alert">
                      Please correct errors
                      </div>
                      <div class='col-6 form-floating'>
                        <input type="text" class="form-control name" placeholder="company_name" disabled>
                        <label class="form-label px-3">Company name</label>
                        <div class='valid-feedback'>Looks good!</div>
                        <div class='invalid-feedback'>Company name required!</div>
                      </div>
                      <div class='col-6 form-floating'>
                        <input type="email" class="form-control string email" placeholder="name@example.com" aria-describedby="emailHelpBlock" disabled>
                        <label class="form-label px-3">Email address</label>
                        <div class='valid-feedback'>Looks good!</div>
                        <div class='invalid-feedback'>Please enter a valid email address!</div>
                      </div>
                      <div class='col-12 form-floating'>
                        <input type="text" class="form-control street" placeholder="company_info_street" disabled>
                        <label class="form-label px-3">Address</label>
                        <div class='valid-feedback'>Looks good!</div>
                        <div class='invalid-feedback'>Please enter a valid street address!</div>
                      </div>
                      <div class='col-6 form-floating'>
                        <input type="text" class="form-control city" placeholder="company_info_city" disabled>
                        <label class="form-label px-3">City</label>
                        <div class='valid-feedback'>Looks good!</div>
                        <div class='invalid-feedback'>Please enter a valid city!</div>
                      </div>
                      <div class='col-6 form-floating'>
                        <input type="text" class="form-control zip" placeholder="company_zip" disabled>
                        <label class="form-label px-3">Zip/postal code</label>
                        <div class='valid-feedback'>Looks good!</div>
                        <div class='invalid-feedback'>Please enter a valid Zip code!</div>
                      </div>
                      <div class='col-6 pt-3'>
                        <label class="form-label" for="company_info_state">State</label>
                        <select type="text" class="form-select state" id="company_info_state" data-default-value="California"  disabled></select>
                        <div class='valid-feedback'>Looks good!</div>
                        <div class='invalid-feedback'>Please select a state or province!</div>
                      </div>
                      <div class='col-6 pt-3'>
                        <label class="form-label" for="company_info_country">Country</label>
                        <select type="text" id="company_info_country" class="form-select crs-country country" data-default-value="United States" data-region-id="company_info_state" disabled></select>
                        <div class='valid-feedback'>Looks good!</div>
                        <div class='invalid-feedback'>Please select a country!</div>
                      </div>
                      <div class='col-12 col-sm-8 offset-sm-2 p-4'>
                        <button class='btn btn-lg simple-button submit w-100' type='button'>Save <i class="fas fa-check"></i></button>
                        <button class="btn primary-color loading_button hidden" type="button" disabled>
                          <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                          Loading...
                        </button>
                      </div>
                    </form>
                  </div>
              </div>
            </div>

    </div>
    <div id='recipients' class='section hidden container-fluid overflow-hidden p-5'>
        <div class='row d-flex justify-content-between'>
            <div class='col-6 d-flex justify-content-start'>
                <p class='fs-2 fw-bold back back_company' style='cursor: pointer;'>
                  <i class="fas fa-arrow-alt-square-left"></i> Back
                </p>
            </div>
        </div>
            <div class='d-flex flex-wrap align-items-center section'>
                <div class='p-3'><div class='text-start'><span class='fs-3 fw-bold'>Shipping</span><br><span class='fs-3 fw-bold'>Addresses:</span></div></div>
                <div class='p-3 me-auto'><i class="fas fa-map-marked-alt fa-2x"></i></div>
                <div class='p-3 view view_new_recipient'><button type='button' class='btn reversed-primary-button'><p class='fs-3 m-0'>Add address <i class="far fa-plus-square"></i></p></button></div>
            </div>
            <div class="accordion" id="address_accordion">
            </div>
        </div>

    <div id='supplier' class='section hidden container overflow-hidden px-5 py-5'>
      <div class='section_id hidden'></div>
      <div class='row' style='color: #0038B8 !important;'>
        <div class='px-3 col-2 back back_dashboard' style='cursor: pointer;'><p class='fs-3 fw-bold'><i class="fas fa-arrow-alt-square-left" ></i> Back</p></div>
        <h1 class='name col-4 offset-3'></h1>
        <div class='col-3 text-end'>
          <h4 class='edit' style='cursor: pointer;'>Edit <i class="fas fa-edit"></i></h4>
          <br>
          <h4 class='delete' style='cursor: pointer;'>Delete <i class="fas fa-trash-alt"></i></h4>
          <br>
          <h4>Supplier ID: <span class='foreign_id'></span></h4>
          <br>
        </div>
      </div>
      <br>
      <div class='row text-center'>
        <div class='d-flex justify-content-evenly'>
          <div class='p-5 reversed-primary-color rounded-3' style='border-style:solid;'>
            <p class='fs-3 fw-bold'>Total<br>Orders</p>
            <p><i class="fas fa-boxes fa-2x"></i><p>
            <p class='total fs-4 fw-bold'></p>
          </div>
          <div class='p-5 reversed-primary-color rounded-3' style='border-style:solid;'>
            <p class='fs-3 fw-bold'>Shipped<br>Orders</p>
            <p><i class="fas fa-shipping-fast fa-2x"></i><p>
            <p class='shipped fs-4 fw-bold'></p>
          </div>
          <div class='p-5 reversed-primary-color rounded-3' style='border-style:solid;'>
            <p class='fs-3 fw-bold'>Delivered<br>Orders</p>
            <p><i class="fas fa-box-full fa-2x"></i><p>
            <p class='delivered fs-4 fw-bold'></p>
          </div>
        </div>
        </div>
        <div class='row p-5 gy-5'>
          <div class='col-lg-6'>
            <div id='supplier_orders' class='section p-3 text-center section rounded-3' style='border-style:solid; border-color: #0038B8;'>
              <div class='d-flex flex-wrap' style='color: #0038B8;'>
                <div class='p-3'><span class='fs-2 fw-bold'>My POs</span></div>
                <div class='p-3 me-auto'><i class="far fa-file-invoice fa-2x"></i></div>
                <div class='p-3 add'><p class='fs-3 fw-bold'>New PO</p><p><i class="far fa-plus-square fa-2x"></i></p></div>
              </div>
              {% include '_table.html'%}
            </div>
          </div>
          <div class='col-lg-6'>
            <div id='supplier_skus' class='section p-3 text-center section rounded-3' style='border-style:solid; border-color: #0038B8;'>
              <div class='d-flex flex-wrap align-items-center' style='color: #0038B8;'>
                <div class='p-3'><span class='fs-2 fw-bold'>SKUs</span></div>
                <div class='p-3 me-auto'><i class="fal fa-tools fa-2x"></i></div>
                <div class='p-3 add'><p class='fs-3 fw-bold'>Add</p><p><i class="far fa-plus-square fa-2x"></i></p></div>
              </div>
              {% include '_table.html'%}
            </div>
          </div>
        </div>
    </div>
    <div id='sku' class='section hidden container overflow-hidden px-5 py-5'>
         <div class='section_id hidden'></div>
          <div class='supplier_id hidden'> </div>
          <div class='row'>
            <div class='px-3 col-2 back back_dashboard' style='cursor: pointer;'><p class='fs-3 fw-bold'><i class="fas fa-arrow-alt-square-left" ></i> Back</p></div>
            <h1 class='name col-4 offset-3'></h1>
            <div class='col-3 text-end'>
              <h4 class='edit' style='cursor: pointer;'>Edit <i class="fas fa-edit"></i></h4>
              <br>
              <h4 class='delete' style='cursor: pointer;'>Delete <i class="fas fa-trash-alt"></i></h4>
              <br>
              <h4>SKU ID: <span class='foreign_id'></span></h4>
              <br>
              <h4>Supplier: <span class='supplier_name view_supplier' style='cursor: pointer;'></span></h4>
            </div>
          </div>
          <br>
          <div class='row text-center'>
            <div class='d-flex justify-content-evenly'>
              <div class='p-5 rounded-3' style='border-style:solid;'>
                <p class='fs-3 fw-bold'>Total<br>Orders</p>
                <p><i class="fas fa-boxes fa-2x"></i><p>
                <p class='total fs-4 fw-bold'></p>
              </div>
              <div class='p-5 rounded-3' style='border-style:solid;'>
                <p class='fs-3 fw-bold'>Shipped<br>Orders</p>
                <p><i class="fas fa-shipping-fast fa-2x"></i><p>
                <p class='shipped fs-4 fw-bold'></p>
              </div>
              <div class='p-5 rounded-3' style='border-style:solid;'>
                <p class='fs-3 fw-bold'>Delivered<br>Orders</p>
                <p><i class="fas fa-box-full fa-2x"></i><p>
                <p class='delivered fs-4 fw-bold'></p>
              </div>
            </div>
            </div>
            <div class='row py-5'>
              <div class='d-flex justify-content-evenly'>
                <div id='sku_orders' class='section p-3 text-center section overflow-auto rounded-3' style='border-style:solid;'>
                  <div class='d-flex flex-wrap'>
                    <div class='p-3'><span class='fs-2 fw-bold'>My POs</span></div>
                    <div class='p-3 me-auto'><i class="far fa-file-invoice fa-2x"></i></div>
                    <div class='p-3 add'><p class='fs-3 fw-bold'>New PO</p><p><i class="far fa-plus-square fa-2x"></i></p></div>
                  </div>
                  {% include '_table.html'%}
                </div>
              </div>
            </div>
    </div>
    <div id='group' class='section hidden container overflow-hidden px-5 py-5'>
         <div class='section_id hidden'></div>
        <div class='px-3 col-4 back back_dashboard' style='cursor: pointer;'><p class='fs-3 fw-bold'><i class="fas fa-arrow-alt-square-left" ></i> Back</p></div>
        <div class='row d-flex justify-content-end'>
            <h1 class='name col-12 col-sm-4'></h1>
            <div class='col-3 text-end'>
              <h4 class='edit' style='cursor: pointer;'>Edit <i class="fas fa-edit"></i></h4>
              <br>
              <h4 class='delete' style='cursor: pointer;'>Delete <i class="fas fa-trash-alt"></i></h4>
            </div>
        </div>
        {% include '_table.html'%}
    </div>
    <div id='order' class='section hidden container overflow-hidden px-5 py-5'>
        <p class='hidden section_id'></p>
        <div class='row'><div class='px-3 col-4 back back_dashboard' style='cursor: pointer;'><p class='fs-3 fw-bold reversed-primary-color'><i class="fas fa-arrow-alt-square-left" ></i> Back</p></div></div>
        <h4 class='modal-title text-center col-12 reversed-primary-color'>Order ID: <span class='order_id'></span></h4>
        <div class='col-12' style='color: #000;'>
            <div class='hidden' id='order_id'></div>
                <div class='po_header'>
                <div class = 'd-flex px-3'>
                  <div class='p-2 me-auto'><h4 class='edit reversed-primary-color' style='cursor:pointer;'>Edit <i class='fas fa-edit'></i></h4></div>
                  <div class='p-2'><h5 class='reversed-primary-color'>Status: <span class='order_status'></span><span class='delivered_date hidden'></span></h5></div>
                </div>
                <div class = 'd-flex px-3'>
                  <div class='p-2 me-auto'><h4 class='delete reversed-primary-color' style='cursor:pointer;'>Delete <i class='fas fa-trash-alt'></i></h4></div>
                  <div class='p-2'><h5 class='reversed-primary-color'>Created: <span class='created'></span></h5></div><div class='p-2'><h5 class='reversed-primary-color'>Sent: <span class='sent'></span></h5></div>
                </div>
                <div class = 'd-flex px-3'>
                  <div class='p-2'><h4 class='download reversed-primary-color' style='cursor:pointer;'>Download <i class='fas fa-download'></i></h4></div>
                </div>
                <div class = 'd-flex px-3'>
                  <div class='p-2'><h4 class='send reversed-primary-color' style='cursor:pointer;'>Send <i class='fas fa-paper-plane'></i></h4></div>
                </div>
                </div>
                <div class='po_viewer border border-dark border-3 rounded-2 p-3'>
                  <div class='row_1 row align-items-center'>
                    <div class='col-md-3'>
                      <div class="row company_title">
                        <div class='logo'></div>
                        <p class='company_name col-12 align-self-center fs-5 fw-bold'></p>
                      </div>
                    </div>
                    <div class='col-md-8 offset-md-1 p-3'>
                      <div class='row align-items-center'>
                        <table>
                          <tbody>
                            <tr>
                              <td class='fw-bold text-end'>PURCHASE ORDER #</td>
                              <td class='text-end order_foreign_id'></td>
                            </tr>
                            <tr>
                              <td class='fw-bold text-end '>PURCHASE ORDER DATE</td>
                              <td class='text-end order_date'></td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                  <div class='row row_2 p-3'>
                    <div class='col-12 text-break'>
                      <p class='company_address'>
                        <span class='street_address'></span><br><span class='city'></span>, <span class='state'></span>, <span class='zip'></span><br><span class='country'></span><br><span class='email'></span><br><span class='phone'></span>
                      </p>
                    </div>
                  </div>
                  <div class='row row_3'>
                    <div class='col-md-6 vendor_info'>
                      <div class='row'>
                        <div class='col-4 vendor_label'>
                          <p class='fw-bold'>VENDOR:<p>
                          </div>
                          <div class='col-6 text-break'>
                            <span class='fw-bold vendor_name'></span>
                            <p class='vendor_address'>
                              <span class='street_address'></span><br><span class='city'></span>, <span class='state'></span>, <span class='zip'></span><br><span class='country'></span><br><span class='email'></span>
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class='col-md-6 ship_info'>
                        <div class='row'>
                          <div class='col-4 ship_label'>
                            <p class='fw-bold'>SHIP TO:<p>
                            </div>
                            <div class='col-6 text-break'>
                              <p class='ship_address'>
                                <span class='street_address'></span><br><span class='city'></span>, <span class='state'></span>, <span class='zip'></span><br><span class='country'></span><br><span class=phone></span>
                              </p>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class='row row_4 pt-5'>
                        <div class='col-12'>
                          <table class='table order_details'>
                            <thead class='table-secondary'>
                              <tr>
                                <th>Delivery Date</th>
                                <th>Shipping Method</th>
                                <th>Shipping Terms</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td class='mabd'></td>
                                <td class='shipping_method'></td>
                                <td class='shipping_terms'></td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                      <div class='row row_5 pt-5'>
                        <div class='col-12 table-responsive'>
                          <table class='table invoice'>
                            <thead class='table-secondary'>
                              <tr>
                                <th>Item ID</th>
                                <th>Item Name</th>
                                <th>Quantity</th>
                                <th>Unit Cost</th>
                                <th>Line Total</th>
                              </tr>
                            </thead>
                            <tbody class='order_skus'>
                            </tbody>
                          </table>
                        </div>
                      </div>
                      <div class='row_6 row py-5 px-5'>
                        <div class='col-md-6 p-3 align-items-center'>
                          <p class='fw-bold'>NOTES / MEMO<p>
                            <p class='notes'></p>
                        </div>
                        <div class='col-md-6 p-3 align-items-center table-responsive'>
                          <table class='table' style='outline-style: solid; outline-width: 2px;'>
                            <tbody>
                              <tr>
                                <td class=''>Subtotal:</td>
                                <td class='subtotal money'></td>
                              </tr>
                              <tr>
                                <td>TAX (<span class='tax_rate'></span>%):</td>
                                <td class='tax money'></td>
                              </tr>
                              <tr style="background-color: #D3D3D3;">
                                <td class=''>TOTAL:</td>
                                <td class='total money'></td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                        </div>
                      </div>


        </div>
    </div>
    <div id='new_order' class='section hidden container overflow-hidden px-5 py-5'>
        <p class='hidden section_id'></p>
        <div class='row header'><div class='px-3 col-4 text-start back back_dashboard' style='cursor: pointer;'><p class='fs-3 fw-bold reversed-primary-color'><i class="fas fa-arrow-alt-square-left" ></i> Back</p></div></div>
        <h1 class='d-flex justify-content-center align-items-center py-4'><span class='new'>New PO</span><span class='edit hidden'>Edit PO</span></h1>
        <div class="alert alert-danger text-center error hidden" role="alert">
         Please correct errors
        </div>
        <div class='row g-3 py-4' style='color:#000;'>
            <div class='accordation' id='order_setup_accordation'>
              <div class="accordion-item" id='order_setup_my_address'>
                <h2 class="accordion-header" id="order_setup_headingOne">
                  <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#order_setup_collapseOne" aria-expanded="true" aria-controls="order_setup_collapseOne" expanded='true'>
                    My Address<div class='px-3'><i class="fas fa-check fa-2x hidden valid-section" style='color: #4BB543;'></i><i class="fas fa-times fa-2x hidden invalid-section" style='color:red;'></i></div>
                  </button>
                </h2>
                <div id="order_setup_collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#order_setup_accordation">
                  <div class="accordion-body">
                    <div class='row gy-3'>
                      <div class='col-12'>
                        <p>Company address: <span class='company_address'></span></p>
                      </div>
                      <div class='col-7 offset-5'>
                        <div class="form-check">
                          <input class="form-check-input ship_to_company" type="checkbox" value="" id="order_setup_ship_to_company" checked>
                          <label class="form-check-label" for="flexCheckChecked">
                            Ship to company address
                          </label>
                        </div>
                      </div>
                      <div id='order_setup_recipient_address' class='col-12 hidden recipient_address'>
                        <label id='order_setup_select_recipient_label'>Select shipping address</label>
                        <select id='order_setup_select_recipient' class='select_recipient'></select>
                        <div class='valid-feedback'>Looks good!</div>
                        <div class='invalid-feedback'>Please select a shipping address!</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div id='order_setup_supplier' class="accordion-item">
                <h2 class="accordion-header" id="order_setup_headingTwo">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#order_setup_collapseTwo" aria-expanded="false" aria-controls="order_setup_collapseTwo">
                    Supplier<div class='px-3'><i class="fas fa-check fa-2x hidden valid-section" style='color: #4BB543;'></i><i class="fas fa-times fa-2x hidden invalid-section" style='color:red;'></i></div>
                  </button>
                </h2>
                <div id="order_setup_collapseTwo" class="accordion-collapse collapse" aria-labelledby="order_setup_headingTwo" data-bs-parent="#order_setup_accordation">
                  <div class="accordion-body">
                    <label>Select Supplier</label>
                    <select id='order_setup_select_supplier' class='select_supplier'></select>
                    <div class='valid-feedback'>Looks good!</div>
                    <div class='invalid-feedback'>Please select a supplier!</div>
                  </div>
                </div>
              </div>
              <div id='order_setup_skus' class="accordion-item">
                <h2 class="accordion-header" id="order_setup_headingThree">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#order_setup_collapseThree" aria-expanded="false" aria-controls="order_setup_collapseThree">
                    SKUs<div class='px-3'><i class="fas fa-check fa-2x hidden valid-section" style='color: #4BB543;'></i><i class="fas fa-times fa-2x hidden invalid-section" style='color:red;'></i></div>
                  </button>
                </h2>
                <div id="order_setup_collapseThree" class="accordion-collapse collapse" aria-labelledby="order_setup_headingThree" data-bs-parent="#order_setup_accordation">
                  <div class="accordion-body">
                    <div class='row g-3' id='order_setup_skus'>
                      <div id='line_items' class='line_items'>
                        <div class='row line_item py-3'>
                          <div class='hidden sku_id'>
                            None
                          </div>
                          <div class='col-md-3'>
                            <div class="form-floating">
                              <select type="text" class="form-control select_sku name" placeholder="item"></select>
                              <label class="form-label">Select SKU</label>
                              <div class='valid-feedback'>Looks good!</div>
                              <div class='invalid-feedback'>Please select SKU!</div>
                            </div>
                          </div>
                          <div class='col-md-2'>
                            <div class='form-floating'>
                              <input type="number" min='0' class="form-control pack_qty" placeholder="description" value='1' readonly>
                              <label class="form-label">Pack</label>
                            </div>
                          </div>
                          <div class='col-md-2'>
                            <div class='form-floating'>
                              <input type='number' class='form-control calc_amount quantity' min='0' placeholder="quantity">
                              <label class='form-label'>Qty</label>
                            </div>
                          </div>
                          <div class='col-md-2'>
                            <div class='form-floating'>
                              <input type='text' class='form-control calc_amount cost' placeholder="cost" min='0' readonly>
                              <label class='form-label'>Cost</label>
                            </div>
                          </div>
                          <div class='col-md-2'>
                            <div class='form-floating'>
                              <input type='text' class='form-control amount' placeholder="amount" readonly>
                              <label class='form-label'>Amount</label>
                            </div>
                          </div>
                          <div class="col-md-1 align-self-center">
                            <a class='remove_line_item hidden' href="#" >
                              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="black" class="bi bi-trash-fill" viewBox="0 0 16 16">
                                <path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"/>
                              </svg>
                            </a>
                          </div>
                        </div>
                      </div>
                      <div class='row'>
                        <div class='col-2'>
                          <a class='add_line_item' href="#">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">
                              <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                              <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                            </svg>
                            Add SKU
                          </a>
                        </div>
                      </div>
                    </div>
                    <br><br>
                    <div class='row g-3 p-3 primary-color fs-4'>
                        <div class='col-12 col-sm-6'>
                        <p>Tax (<span id='order_setup_tax_rate' class='tax_rate'>13</span>%): <span id='order_setup_tax' class='tax'>-</span></p>
                        <p id='order_setup_change_tax_link' class='edit_tax text-decoration-underline' style='cursor:pointer;'>Change Tax Rate</p>
                        <div id='order_setup_change_tax' class="mb-3 hidden change_tax_section">
                            <label for='order_setup_new_tax'>Enter new tax rate</label>
                            <input type="number" placeholder="13" min='0' id='order_setup_new_tax' class='new_tax' >
                            <br>
                            <p  id='order_setup_close_change_tax' style='cursor:pointer;' class='close_tax'>Done</p>
                        </div>
                        </div>
                        <div class='col-12 col-sm-6'>

                        <p>Subtotal: <span id='order_setup_subtotal' class='subtotal'>-</span></p>
                        <p>Total: <span id='order_setup_total' class='total'>-</span></p>
                        </div>
                  </div>
                </div>
              </div>
            </div>
              <div id='order_setup_details' class="accordion-item">
                <h2 class="accordion-header" id="order_setup_headingFour">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#order_setup_collapseFour" aria-expanded="false" aria-controls="order_setup_collapseFour">
                    Details<div class='px-3'><i class="fas fa-check fa-2x hidden valid-section" style='color: #4BB543;'></i><i class="fas fa-times fa-2x hidden invalid-section" style='color:red;'></i></div>
                  </button>
                </h2>
                <div id="order_setup_collapseFour" class="accordion-collapse collapse" aria-labelledby="order_setup_headingFour" data-bs-parent="#order_setup_accordation">
                  <div class="accordion-body">
                    <div class='row g-3 py-3'>
                      <div class="row py-4 status" id='order_setup_status'>
                        <button id="order_setup_1" class='btn pick-button status col-sm-3 offset-sm-1' type='button'><p class='fs-3 text-center'>Ordered<br><i class="fal fa-file-invoice"></i></p></button>
                         <button id="order_setup_2" class='btn pick-button status col-sm-3 offset-sm-1' type='button'><p class='fs-3 text-center'>Shipped<br><i class="fal fa-shipping-fast"></i></p></button>
                        <button id="order_setup_3" class='btn pick-button status col-sm-3 offset-sm-1' type='button'><p class='fs-3 text-center'>Delivered<br><i class="fal fa-box-full"></i></button>
                      </div>
                      <div id='order_setup_delivered_date_section' class='offset-8 col-4 py-3 hidden'>
                        <div class="form-floating mb-3">
                          <input type="date" class="form-control date hidden" id='order_setup_delivered_date' placeholder="delivered_date" >
                          <label class="form-label" for="order_setup_delivered_date">Delivery date</label>
                          <div class='valid-feedback'>Looks good!</div>
                          <div class='invalid-feedback'>Please enter a valid delivery date!</div>
                        </div>
                      </div>
                      <div class='col-md-4'>
                        <div class="form-floating">
                          <input type="text" class="form-control order" id="order_setup_foreign_id" placeholder="foreign_id" >
                          <label class="form-label" for="order_setup_foreign_id">Purchase Order #</label>
                          <div class='valid-feedback'>Looks good!</div>
                          <div class='invalid-feedback'>Please enter a purchase order id!</div>
                        </div>
                      </div>
                      <div class='col-md-4'>
                        <div class="form-floating mb-3">
                          <input type="date" class="form-control date order_date" id="order_setup_order_date" placeholder="order_date" >
                          <label class="form-label" for="order_setup_order_date">Purchase order date</label>
                          <div class='valid-feedback'>Looks good!</div>
                          <div class='invalid-feedback'>Please enter a valid order date!</div>
                        </div>
                      </div>
                      <div class='col-md-4'>
                       <div class="form-floating">
                        <input type="date" class="form-control date mabd_date" id="order_setup_mabd" placeholder="mabd" >
                        <label class="form-label" for="order_setup_mabd">MABD date</label>
                        <div class='valid-feedback'>Looks good!</div>
                        <div class='invalid-feedback'>Please enter a valid MABD date!</div>
                      </div>
                    </div>
                    <div class='col-md-4'>
                        <label class="form-label" for="order_setup_shipping_method">Shipping method</label>
                        <input type="text" class="form-control text shipping_method" id="order_setup_shipping_method">

                    </div>
                    <div class='col-md-8'>
                      <label class="form-label" for="order_setup_shipping_terms">Shipping terms</label>
                      <textarea class="form-control text shipping_terms" id="order_setup_shipping_terms"  rows=3></textarea>
                    </div>
                    <div class='col-12'>
                      <label class="form-label" for='order_setup_notes'>Notes / Memo</label>
                      <textarea class="form-control notes" rows='6' id='order_setup_notes'></textarea>
                    </div>
                    <div class='col-12 col-md-4 offset-md-4 py-4'>
                      <button class='btn btn-lg simple-button submit_button w-100' id='submit_order_setup' type='button'>
                        Submit PO
                      </button>
                      <button class="btn btn-lg simple-button w-100 loading_button hidden" type="button" disabled>
                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                        Loading...
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

    </div>
    <div id='new_sku' class='section hidden container overflow-hidden px-5 py-5'>
        <span class='hidden section_id'></span>
        <div class='header'>
        <div class='row'><div class='px-3 col-4 back back_dashboard' style='cursor: pointer;'><p class='fs-3 fw-bold reversed-primary-color'><i class="fas fa-arrow-alt-square-left" ></i> Back</p></div></div>
        <h1 class='d-flex justify-content-center align-items-center py-4'><span class='new'>New SKU</span><span class='edit hidden'>Edit SKU</span></h1>
        <div class="alert alert-danger text-center error hidden" role="alert">
         Please correct errors
        </div>
        </div>
        <form class='row g-3 py-4 needs_validation' style='color: #000;'>
            <div class='col-12'>
            <div class='col-8 offset-2'>
              <div class='form-floating'>
                <select class='form-select select_supplier form-select-lg' style='height: 65px !important;' aria-label='.form-select-lg'>
                </select>
                <label class="form-label">Select supplier <span style='color:red'>*</span></label>
              </div>
            </div>
            <div class='row p-4' >
            <div class='col-md-6'>
              <div class="form-floating">
                <input type="text" class="form-control foreign_id" placeholder="item" >
                <label class="form-label">Item ID <span style='color:red'>*</span></label>
                <div class='valid-feedback'>Looks good!</div>
                <div class='invalid-feedback'>Please enter item name!</div>
              </div>
            </div>
            <div class='col-md-6'>
              <div class='form-floating'>
                <input type="text"class="form-control name" placeholder="description" >
                <label class="form-label">Item Name <span style='color:red'>*</span></label>
              </div>
            </div>
            </div>
            <hr>
            <p class="fs-5 fw-bold">Unit</p>
            <div class='row p-4'>
                <div class='col-md-4'>
                  <div class='form-floating'>
                    <input type='text' class='form-control calc_amount cost string' placeholder="cost" min='0'>
                    <label class='form-label'>Unit Cost <span style='color:red'>*</span></label>
                  </div>
                </div>
                <div class='col-md-4'>
                  <div class='form-floating'>
                    <input type='text'class='form-control price' placeholder="price" min='0'>
                    <label class='form-label'>Unit Retail Price <span style='color:red'>*</span></label>
                  </div>
                </div>
                <div class='col-md-4'>
                  <div class='form-floating'>
                    <input type="number" min='0' step='0.01' class="form-control weight string" placeholder="description">
                    <label class="form-label">Unit Weight</label>
                  </div>
                </div>
            </div>
            <div class='row  p-4'>
            <div class='col-md-4'>
              <div class='form-floating'>
                <input type="number" min='0' step='0.01' class="form-control unit_x string" placeholder="description">
                <label class="form-label">Unit X Length:</label>
              </div>
            </div class='row p-4'>
                <div class='col-md-4'>
                  <div class='form-floating'>
                    <input type="number" min='0' step='0.01' class="form-control unit_y string" placeholder="description">
                    <label class="form-label">Unit Y Length:</label>
                  </div>
                </div>
                <div class='col-md-4'>
                  <div class='form-floating'>
                    <input type="number" min='0' step='0.01'class="form-control unit_z string" placeholder="description">
                    <label class="form-label">Unit Z Length:</label>
                  </div>
                </div>
            </div>
            <hr>
            <p class="fs-5 fw-bold">Pack</p>
            <div class='row p-4'>
                <div class='col-md-4'>
                  <div class='form-floating'>
                    <input type="number" min='0' class="form-control pack_qty string" placeholder="description" value='1'>
                    <label class="form-label">Pack Quantity <span style='color:red'>*</span></label>
                  </div>
                </div>
                <div class='col-md-4'>
                  <div class='form-floating'>
                    <input type="number" min='0' step='0.01' class="form-control pack_weight string" placeholder="description">
                    <label class="form-label">Pack Weight</label>
                  </div>
                </div>
                <div class='col-md-4'>
                  <div class='form-floating'>
                    <input type="number" min='0' step='0.01' class="form-control pack_x dim string" placeholder="description">
                    <label class="form-label">Pack X Length:</label>
                  </div>
                </div>
            </div>
            <div class='row p-4'>
                <div class='col-md-4'>
                  <div class='form-floating'>
                    <input type="number" min='0' step='0.01' class="form-control pack_y dim string" placeholder="description">
                    <label class="form-label">Pack Y Length:</label>
                  </div>
                </div>
                <div class='col-md-4'>
                  <div class='form-floating'>
                    <input type="number" min='0' step='0.01' class="form-control pack_z dim string" placeholder="description">
                    <label class="form-label">Pack Z Length:</label>
                  </div>
                </div>
            </div>
            <div class='col-12 col-sm-8 offset-sm-2 p-4'>
                <button class='btn btn-lg simple-button submit w-100' type='button'>Submit</button>
                <button class="btn primary-color loading_button hidden w-100" type="button" disabled>
                  <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                  Loading...
              </button>
            </div>
          </div>
        </form>
    </div>
    <div id='new_recipient' class='section hidden container overflow-hidden px-5 py-5'>
        <span class='hidden section_id'></span>
        <div class='header'>
            <div class='row'><div class='px-3 col-4 back back_recipients' style='cursor: pointer;'><p class='fs-3 fw-bold reversed-primary-color'><i class="fas fa-arrow-alt-square-left" ></i> Back</p></div></div>
            <h1 class='d-flex justify-content-center align-items-center py-4'><span class='new'>New address</span><span class='edit hidden'>Edit address</span></h1>
            <div class="alert alert-danger text-center error hidden" role="alert">
             Please correct errors
            </div>
            <form class='row g-3 py-4 needs_validation' style='color: #000;'>
                <div class='col-md-6'>
                    <div class="form-floating">
                      <input type="text" class="form-control name" placeholder="recipient_name">
                      <label class="form-label">Recipient name</label>
                      <div class='valid-feedback'>Looks good!</div>
                      <div class='invalid-feedback'>Recipient name required!</div>
                    </div>
                  </div>
                  <div class='col-md-6'>
                    <div class="form-floating">
                      <input type="text" class="form-control phone" placeholder="recipient_phone">
                      <label class="form-label">Phone number</label>
                      <div class='valid-feedback'>Looks good!</div>
                      <div class='invalid-feedback'>Please enter a valid phone number!</div>
                    </div>
                  </div>
                  <div class='col-12'>
                    <div class="form-floating">
                      <input type="text" class="form-control street" placeholder="recipient_street">
                      <label class="form-label" >Address</label>
                      <div class='valid-feedback'>Looks good!</div>
                      <div class='invalid-feedback'>Please enter a valid address!</div>
                    </div>
                  </div>
                  <div class='col-md-6'>
                    <div class="form-floating">
                      <input type="text" class="form-control city" placeholder="recipient_city">
                      <label class="form-label">City</label>
                      <div class='valid-feedback'>Looks good!</div>
                      <div class='invalid-feedback'>Please enter a valid address!</div>
                    </div>
                  </div>
                  <div class='col-md-6'>
                    <div class="form-floating">
                      <input type="text" class="form-control zip" placeholder="recipient_zip" >
                      <label class="form-label">Zip/postal code</label>
                      <div class='valid-feedback'>Looks good!</div>
                      <div class='invalid-feedback'>Please enter a valid Zip code!</div>
                    </div>
                  </div>
                  <div class='col-md-6 pt-3'>
                    <label class="form-label" for="recipient_country">Country</label>
                    <select type="text" id="recipient_country" class="form-select crs-country country" data-default-value="United States" data-region-id="recipient_state"></select>
                    <div class='valid-feedback'>Looks good!</div>
                    <div class='invalid-feedback'>Please select a country!</div>
                  </div>
                  <div class='col-md-6 pt-3'>
                    <label class="form-label" for="recipient_state">State</label>
                    <select type="text" class="form-select state" id="recipient_state" data-default-value="California"></select>
                    <div class='valid-feedback'>Looks good!</div>
                    <div class='invalid-feedback'>Please select a state or province!</div>
                  </div>
                  <div class='col-12 col-sm-8 offset-sm-2 p-4'>
                    <button class='btn btn-lg simple-button submit w-100' type='button'>Submit</button>
                    <button class="btn primary-color loading_button hidden w-100" type="button" disabled>
                      <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                      Loading...
                  </button>
                </div>
            </form>
        </div>
    </div>
    <div id='new_supplier' class='section hidden container overflow-hidden px-5 py-5'>
    <span class='hidden section_id'></span>
    <div class='header'>
        <div class='row'>
            <div class='px-3 col-4 back back_dashboard' style='cursor: pointer;'><p class='fs-3 fw-bold reversed-primary-color'><i class="fas fa-arrow-alt-square-left" ></i> Back</p></div></div>
            <h1 class='d-flex justify-content-center align-items-center py-4'><span class='new'>New supplier</span><span class='edit hidden'>Edit supplier</span></h1>
            <div class="alert alert-danger text-center error hidden" role="alert">
            Please correct errors
            </div>
        </div>
        <form class='row g-3 py-4 needs_validation' style='color: #000;'>
          <div class='col-md-6'>
            <div class="form-floating">
              <input type="text" class="form-control name" id="supplier_name" placeholder="supplier_name">
              <label class="form-label" for="supplier_name">Supplier name</label>
              <div class='valid-feedback'>Looks good!</div>
              <div class='invalid-feedback'>Supplier name required!</div>
            </div>
          </div>
          <div class='col-md-6'>
            <div class="form-floating">
              <input type="text" class="form-control foreign_id" id="supplier_foreign_id" placeholder="supplier_foreign_id">
              <label class="form-label" for="supplier_foreign_id">Supplier ID</label>
              <div class='valid-feedback'>Looks good!</div>
              <div class='invalid-feedback'>Supplier ID required!</div>
            </div>
          </div>
          <div class='col-md-6'>
            <div class="form-floating">
              <input type="text" class="form-control string email" id="supplier_email" placeholder="supplier_email">
              <label class="form-label" for="supplier_email">Email Address</label>
              <div class='valid-feedback'>Looks good!</div>
              <div class='invalid-feedback'>Please enter a valid email address!</div>
            </div>
          </div>
          <div class='col-md-6'>
            <div class="form-floating">
              <input type="text" class="form-control string phone" id="supplier_phone" placeholder="supplier_phone">
              <label class="form-label" for="supplier_phone">Phone number</label>
              <div class='valid-feedback'>Looks good!</div>
              <div class='invalid-feedback'>Please enter a valid phone number!</div>
            </div>
          </div>
          <div class='col-12'>
            <div class="form-floating">
              <input type="text" class="form-control street" id="supplier_street" placeholder="supplier_street">
              <label class="form-label" for="supplier_street">Address</label>
              <div class='valid-feedback'>Looks good!</div>
              <div class='invalid-feedback'>Please enter a valid address!</div>
            </div>
          </div>
          <div class='col-md-6'>
            <div class="form-floating">
              <input type="text" class="form-control city" id="supplier_city" placeholder="supplier_city">
              <label class="form-label" for="supplier_city">City</label>
              <div class='valid-feedback'>Looks good!</div>
              <div class='invalid-feedback'>Please enter a valid city!</div>
            </div>
          </div>
          <div class='col-md-6'>
            <div class="form-floating">
              <input type="text" class="form-control zip" id="supplier_zip" placeholder="supplier_zip">
              <label class="form-label" for="supplier_zip">Zip/postal code</label>
              <div class='valid-feedback'>Looks good!</div>
              <div class='invalid-feedback'>Please enter a valid Zip code!</div>
            </div>
          </div>
          <div class='col-md-6 pt-3'>
            <label class="form-label" for="supplier_country">Country</label>
            <select type="text" id="supplier_country" class="form-select crs-country country" data-default-value="United States" data-region-id="supplier_state"></select>
            <div class='valid-feedback'>Looks good!</div>
            <div class='invalid-feedback'>Please select a country!</div>
          </div>
          <div class='col-md-6 pt-3'>
            <label class="form-label" for="supplier_state">State</label>
            <select type="text" class="form-select state" id="supplier_state" data-default-value="California"></select>
            <div class='valid-feedback'>Looks good!</div>
            <div class='invalid-feedback'>Please select a state or province!</div>
          </div>
          <div class='col-12 col-sm-8 offset-sm-2 p-4'>
            <button class='btn btn-lg simple-button submit w-100' type='button'>Submit</button>
            <button class="btn primary-color loading_button hidden w-100" type="button" disabled>
              <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
              Loading...
          </button>
        </div>
        </form>
    </div>
    <div id='new_group' class='section hidden container overflow-hidden px-5 py-5'>
        <span class='hidden section_id'></span>
        <div class='header'>
            <div class='row'><div class='px-3 col-4 back back_dashboard' style='cursor: pointer;'><p class='fs-3 fw-bold reversed-primary-color'><i class="fas fa-arrow-alt-square-left" ></i> Back</p></div></div>
            <h1 class='d-flex justify-content-center align-items-center py-4'><p><span class='new'>New group </span><span class='edit hidden'>Edit group</span> <i class='fal fa-object-group'></i><p></h1>
            <div class="alert alert-danger text-center error hidden" role="alert">
             Please correct errors
            </div>
        </div>
        <form class='row gy-5 py-4 col-12 col-sm-6 offset-sm-3' style='color: #000;'>
            <div class='form-floating col-12'>
                  <input type="text" class='form-control name' placeholder="name"></input>
                  <label class='form-label ps-4'>Group name</label>
                  <div class='valid-feedback'>Looks good!</div>
                  <div class='invalid-feedback'>Please enter a group name!</div>
            </div>
            <div class='col-12 p-3'>
              <h1 class='text-center reversed-primary-color'>
                SKUs <i class="fal fa-tools"></i></h1>
            </div>
            <table class='table align-middle'>
              <tbody>
                <tr>
                  <th class='reversed-primary-color number' scope='row'>1
                  </th>
                  <td>
                    <select class='form-select select_supplier' aria-label='select_supplier'>
                      <option value='None' selected>Select supplier</option>
                    </select>
                    <div class='valid-feedback'>Looks good!</div>
                    <div class='invalid-feedback'>Please select a supplier!</div>
                  </td>
                  <td>
                    <select class='form-select select_sku' aria-label='select_sku'>
                      <option value='None' selected>Select SKU</option>
                    </select>
                    <div class='valid-feedback'>Looks good!</div>
                    <div class='invalid-feedback'>Please select a supplier!</div>
                  </td>
                  <td class='delete'>
                    <i class="fas fa-trash-alt reversed-primary-color" style='cursor:pointer;'></i>
                  </td>
                </tr>
              </tbody>
            </table>
            <div class='col-12 d-flex justify-content-center'>
                <button class='simple-button flip add_sku btn' type='button' style='cursor:pointer;'>Add SKU <i class="fas fa-plus-square"></i></button>
            </div>
            <div class='col-12 col-sm-8 offset-sm-2 p-4'>
                <button class='btn btn-lg simple-button submit w-100' type='button'>Submit</button>
                <button class="btn primary-color loading_button hidden w-100" type="button" disabled>
                  <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                  Loading...
              </button>
            </div>
        </form>
    </div>
    <div id='login' class='section hidden container overflow-hidden px-5 py-5' style='color: #000;'>
      <div class='px-3 d-none d-lg-block col-12 back back_homepage reversed-primary-color' style='cursor: pointer;'><p class='fs-3 fw-bold'><i class="fas fa-arrow-alt-square-left" ></i> Back</p></div>
      <div class='col-12 col-sm-10 offset-sm-1 col-md-8 offset-md-2 col-lg-6 offset-lg-3 mt-5 mt-lg-0'>
          <div class='row justify-content-center'>
            <svg xmlns="http://www.w3.org/2000/svg" width="75" height="75" fill="#0038B8" class="bi bi-box-seam text-black" viewBox="0 0 16 16">
              <path d="M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5l2.404.961L10.404 2l-2.218-.887zm3.564 1.426L5.596 5 8 5.961 14.154 3.5l-2.404-.961zm3.25 1.7l-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923l6.5 2.6zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464L7.443.184z"/>
            </svg>
            <h1 class='reversed-primary-color text-center display-5 py-3'>Sign In</h1>
          </div>
          <div class='type py-3'>
              <div class="redirect hidden py-3 col-12 alert alert-primary text-center" role="alert">
              Please log in to access this page.
              </div>
              <div class='user_confirmed success hidden col-12 alert alert-primary text-center'>Email confirmed!</div>
              <div class='unconfirmed hidden col-12 alert alert-primary text-center'>We have sent an email with a confirmation link to your email address. In order to complete the sign-up process, please click the confirmation link.
              <br><br>
              If you do not receive a confirmation email, please check your spam folder.</div>
              <div class='invalid_link hidden col-12 alert alert-danger text-center'>Invalid link!</div>
              <div class='no_name hidden col-12 alert alert-primary text-center'>Please enter your email or username!</div>
              <div class='no_psw hidden col-12 alert alert-primary text-center'>Please enter your password!</div>
              <div class='invalid_email hidden alert col-12 alert-primary text-center'>There is no account with this email and password!</div>
              <div class='invalid_username hidden alert col-12 alert-primary text-center'>There is no account with this username!</div>
              <div class='invalid_password hidden alert col-12 alert-primary text-center'>Password incorrect!</div>
          </div>
          <form class='row g-3'>
            <div class='mb-3 form-floating'>
               <input class="form-control form-control-lg" id='login_username' name='login_username' type='text' placeholder="username">
              <label class='form-label p-3' for='login_username'>Email address or username</label>
            </div>
            <div class='mb-3 form-floating'>
              <input id='login_psw' name='login_psw' type='password' placeholder="psw" class="form-control form-control-lg">
              <label class='form-label p-3' for='login_psw'>Password</label>
              <p class='p-3 reversed-primary-color' style="cursor: pointer;">Forgot password?</p>
            </div>
            <div class='mb-3'>
               <input type='button' id='login_submit' class='col-12 col-sm-10 offset-sm-1 col-md-8 offset-md-2 col-lg-6 offset-lg-3 submit_form btn btn-lg primary-button' value='Submit'>
            </div>
            <div class='row d-flex justify-content-center ps-5 my-4 loading_spinner'>
              <div class="spinner-border reversed-primary-color hidden" style="width: 4rem; height: 4rem;" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
          </div>
          </form>
      </div>
    </div>
    <div id='register' class='section hidden container overflow-hidden px-5 py-5'>
      <div class='d-none d-lg-block px-3 col-12 back reversed-primary-color' style='cursor: pointer;'><p class='fs-3 fw-bold'><i class="fas fa-arrow-alt-square-left" ></i> Back</p></div>
      <div class='col-12 col-sm-10 offset-sm-1 col-md-8 offset-md-2 col-lg-6 offset-lg-3 mt-5 mt-lg-0'>
        <div class='row justify-content-center'>
            <svg xmlns="http://www.w3.org/2000/svg" width="75" height="75" fill="#0038B8" class="bi bi-box-seam text-black" viewBox="0 0 16 16">
              <path d="M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5l2.404.961L10.404 2l-2.218-.887zm3.564 1.426L5.596 5 8 5.961 14.154 3.5l-2.404-.961zm3.25 1.7l-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923l6.5 2.6zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464L7.443.184z"/>
            </svg>
            <h1 class='reversed-primary-color text-center display-5 py-3'>Register</h1>
        </div>
        <div class='type py-3'>
            <div class='username_taken hidden py-3 alert-primary text-center'>This username is already taken, please try another!</div>
            <div class='email_taken hidden py-3 alert-primary text-center'>An account already exists with this email!</div>
            <div class='invalid_email py-3 hidden alert-primary text-center'>Please enter a valid email address!</div>
            <div class='invalid_username hidden py-3 alert-primary text-center'>Please enter a valid username!</div>
            <div class='invalid_password hidden py-3 alert-primary text-center'>Please enter a valid password!</div>
            <div class='password_no_match hidden py-3 alert-primary text-center'>Passwords must match!</div>
            <div class='unkown_error hidden py-3 alert-primary text-center'>Unknown Error</div>
            <div class='invalid_demo_code hidden py-3 alert-primary text-center'>Please enter a valid demo code!</div>
        </div>
        <form class='row g-3'>
          <fieldset disabled>
            <div class='mb-3 form-floating'>
              <input class="form-control form-control-lg" id='register_email' name='register_email' type='text' placeholder="email">
              <label class='form-label p-3' for='email'>Email</label>
            </div>
          </fieldset>
            <div class='mb-3 form-floating'>
              <input class="form-control form-control-lg" id='register_username' name='register_username' type='text' placeholder="username">
              <label class='form-label p-3' for='username'>Username</label>
            </div>
            <div class='mb-3 form-floating'>
              <input class="form-control form-control-lg" id='register_psw' name='register_psw' type='password' placeholder="psw">
              <label class='form-label p-3' for='psw'>Password</label>
            </div>
            <div class='mb-3 form-floating'>
              <input class="form-control form-control-lg" id='register_psw_2' name='register_psw_2' type='password' placeholder="psw">
              <label class='form-label p-3' for='psw_2'>Password</label>
            </div>
            <div class='mb-3'>
              <input type='button' id='submit_register_form' class='col-12 col-sm-10 offset-sm-1 col-md-8 offset-md-2 col-lg-6 offset-lg-3 submit_form btn btn-lg primary-button' value='Submit'>
            </div>
            <div class='mb-3'>
              <p class='text-center'>Already have an account? <a href="#" class='view_login'>Click to login!</a></p>
            </div>
            <div class='row d-flex justify-content-center ps-5 my-4 loading_spinner'>
              <div class="spinner-border reversed-primary-color hidden" style="width: 4rem; height: 4rem;" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
            </div>
        </form>
      </div>
    </div>
    <div id='homepage' class='section container px-5 py-5 overflow-hidden' style='color: #666666'>
        <div class='col-10 offset-1'>
                <div class='row align-items-center gy-5 mt-5'>
                  <div class='col-12 col-md-6 text-start'>
                      <h1 class="display-3 py-3">Artificial intelligence for retail.</h1>
                      <p class="lead fs-4 py-3">Optimize buying strategies and simplify supplier management with SpeedyPO's powerful, user-friendly platform.</p>
                  </div>
                  <div class='col-12 col-md-6'>
                    <div class="text-center">
                      <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" fill="#0038B8" class="bi bi-box-seam text-black" viewBox="0 0 16 16">
                        <path d="M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5l2.404.961L10.404 2l-2.218-.887zm3.564 1.426L5.596 5 8 5.961 14.154 3.5l-2.404-.961zm3.25 1.7l-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923l6.5 2.6zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464L7.443.184z"/>
                      </svg>
                    </div>
                  </div>
                  <div class='col-12 pt-5 pt-md-3'>
                    <button type='button' class='col-8 offset-2 col-md-4 offset-md-4 py-3 reversed-primary-button active btn view view_book_demo'>Request access</button>
                  </div>
                  <div class='col-12'>
                      <hr class='m-5'>
                  </div>
                </div>
                <div class='row' id='hp_tiles'>
                    <div class="col-md-6 hp_text">
                      <div class="py-5 pe-5 pe-md-0 ps-5">
                        <h2 class="display-4">Speediest POs</h2>
                        <p>
                          Quickly generate flexible and easy to read purchase orders.
                        </p>
                      </div>
                    </div>
                    <div class="col-md-6 primary-color hp_icon">
                      <div class="p-5 myicon my-4">
                        <i class="far fa-file-invoice fa-5x"></i>
                      </div>
                    </div>
                    <div class="col-md-6 hp_text">
                      <div class="py-5 ps-5 ps-md-0 pe-5">
                        <h2 class="display-4">Track orders</h2>
                        <p>Track orders, so you can better manage your inventory and prevent out-of-stocks.</p>
                      </div>
                    </div>
                    <div class="col-md-6 primary-color hp_icon">
                      <div class="p-5 myicon my-0 my-md-4 ">
                        <i class="far fa-calendar-alt fa-5x"></i>
                      </div>
                    </div>
                    <div class="col-md-6 hp_text">
                      <div class="py-5 pe-5 pe-md-0 ps-5">
                        <h2 class="display-4">AI driven solutions</h2>
                        <p>AI compares average SKU costs and lead times to recommend optimal buying strategies.</p>
                      </div>
                    </div>
                    <div class="col-md-6 primary-color hp_icon">
                      <div class="p-5 myicon my-0 my-md-4">
                        <i class="far fa-user-robot fa-5x"></i>
                      </div>
                    </div>
                    <div class="col-md-6 hp_text">
                      <div class="py-5 ps-5 ps-md-0 pe-5">
                        <h2 class="display-4">Manage Assortment</h2>
                        <p>Quickly onboard suppliers and setup SKUs.</p>
                      </div>
                    </div>
                    <div class="col-md-6 primary-color hp_icon">
                      <div class="p-5 myicon my-0 my-md-4">
                        <i class="fas fa-box-full fa-5x my-4"></i>
                      </div>
                    </div>
                  <div class="col-md-6 hp_text">
                    <div class="py-5 pe-5 pe-md-0 ps-5">
                      <h2 class="display-4">Cloud storage</h2>
                      <p>SpeedyPO saves all your data safely on the cloud, so it is easily accessible on all devices via any browser.</p>
                    </div>
                  </div>
                  <div class="col-md-6 primary-color hp_icon">
                    <div class="p-5 myicon my-0 my-md-4">
                      <i alt='' class="far fa-cloud-upload-alt fa-5x"></i>
                    </div>
                  </div>

              </div>
                  <footer class="py-5">
                    <p class="m-0 text-center text-white small" style='color: #44557e!important;'>Copyright &copy; SpeedyPO 2021&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#" target=_blank>Terms and conditions</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#" target=_blank>Privacy Policy</a></p>
                  </footer>
                </div>
    </div>

    <div id='welcome' class='section hidden container px-5 py-5 overflow-hidden'>
      <div class='row g-5 my-5'>
          <div class='col-12 pb-3'>
            <h1 class='display-3 reversed-primary-color text-center'>Welcome to SpeedyPO!</h1>
          </div>
          <div class='col-12 pb-3'>
            <div class="text-center">
                  <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" fill="#0038B8" class="bi bi-box-seam text-black" viewBox="0 0 16 16">
                    <path d="M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5l2.404.961L10.404 2l-2.218-.887zm3.564 1.426L5.596 5 8 5.961 14.154 3.5l-2.404-.961zm3.25 1.7l-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923l6.5 2.6zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464L7.443.184z"/>
                  </svg>
            </div>
          </div>
            <div class='col-12 pb-3'>
              <div class='text-center'>
              <button class='btn btn-lg primary-button view_dashboard' type='button'>Enter</button>
              </div>
            </div>
        </div>
    </div>
    <div id='book_demo' class='section container px-5 py-5 hidden overflow-hidden'>
      <div class='row g-5'>
      <div class='p-3 col-12 reversed-primary-color d-flex justify-content-start' >
          <p class='fs-2 p-3 fw-bold m-0 back back_homepage' style='cursor: pointer;'>
            <i class="fas fa-arrow-alt-square-left"></i> Back
          </p>
      </div>
      <div class='col-12 m-md-0 d-flex justify-content-center'>
        <h1 class='display-3 reversed-primary-color'>Request access</h1>
      </div>
      <form class='col-12 col-md-8 offset-md-2 demo_form'>
        <div class="alert alert-danger hidden text-center" id='book_demo_error' role="alert">
            Please correct errors!
        </div>
        <div class='mb-3'>
          <label for='demo_first_name' class='form-label'>First name <span style="color: red;">*</span></label>
          <input id='demo_first_name' class='form-control name'></input>
          <div class='valid-feedback'>Looks good!</div>
          <div class='invalid-feedback'>First name required!</div>
        </div>
        <div class='mb-3'>
          <label for='demo_last_name' class='form-label'>Last name <span style="color: red;">*</span></label>
          <input id='demo_last_name' class='form-control name'></input>
          <div class='valid-feedback'>Looks good!</div>
          <div class='invalid-feedback'>Last name required!</div>
        </div>
        <div class='mb-3'>
          <label for='demo_email' class='form-label'>Email <span style="color: red;">*</span></label>
          <input id='demo_email' class='form-control email'></input>
          <div class='valid-feedback'>Looks good!</div>
          <div class='invalid-feedback'>Email required!</div>
        </div>
        <div class='mb-3'>
          <label for='demo_company_name' class='form-label'>Company name</label>
          <input id='demo_company_name' class='form-control text'></input>
        </div>
        <div class='mb-3'>
          <label for='demo_how_did_you_hear' class='form-label'>How did you hear about us?</label>
          <select id='demo_background' class='form-select text' aria-label='demo_background'>
            <option value='' selected>Please select</option>
            <option value='0'>Referral</option>
            <option value='1'>Google</option>
            <option value='2'>Facebook</option>
            <option value='3'>LinkedIn</option>
          </select>
        </div>
        <div class='col-12 order-4 order-md-4'>
          <button type='button' id='demo_submit' class='primary-button btn btn-lg col-12 mt-5 col-sm-4 offset-sm-4'>Submit</button>
        </div>
        <div class='row d-flex justify-content-center my-4 loading_spinner'>
          <div class="spinner-border reversed-primary-color hidden" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </form>

      </div>
    </div>
    <div id='account' class='section container px-5 py-5 hidden overflow-hidden'>
        <div id='account_alerts'>
          <div id='password_updated' class="hidden col-6 offset-3 alert alert-primary text-center" role="alert">
          Password successfully updated!
          </div>
        </div>
        <div class='row g-5 py-3'>
          <div class='col-12 d-flex justify-content-start g-0'>
                <p class='fs-2 p-3 fw-bold m-0 back back_dashboard reversed-primary-color' style='cursor: pointer;'>
                  <i class="fas fa-arrow-alt-square-left"></i> Back
                </p>
            </div>
            <div class='col-12'>
                <p class='text-center text-capitalize fs-1' style='color: #0038B8 !important;'>{{ user.username }}</p>
            </div>
            <div class='col-12'>
                <div id='password' class='d-flex flex-wrap reversed-primary-color section overflow-auto align-items-center rounded-3' style='border-style:solid;'>
                        <div class='p-3'><span class='fs-2 fw-bold'>Password</span></div>
                        <div class='p-3 me-auto'><i class="fas fa-lock fa-2x"></i></div>
                        <div class='p-3'><button class='btn primary-button account_button'>Change Password</button></div>
                </div>
            </div>
            <div class='col-12'>
                <div id='subscription' class='d-flex flex-wrap reversed-primary-color section overflow-auto align-items-center rounded-3' style='border-style:solid;'>
                        <div class='p-3'><span class='fs-2 fw-bold'>Subscription</span></div>
                        <div class='p-3 me-auto'><i class="fas fa-user-circle fa-2x"></i></div>
                        <div class='p-3'><button class='btn primary-button'>Subscription options</button></div>
                </div>
            </div>
            <div class='col-12'>
                <div id='account_settings' class='d-flex flex-wrap reversed-primary-color section overflow-auto align-items-center rounded-3' style='border-style:solid;'>
                        <div class='p-3'><span class='fs-2 fw-bold'>Settings</span></div>
                        <div class='p-3 me-auto'><i class="fas fa-cog fa-2x"></i></div>
                        <div class='p-3'><button class='btn primary-button'>Account Settings</button></div>
                </div>
            </div>

        </div>
    </div>
    <div id='subscription'  class='section container-fluid px-5 py-5 hidden'>
      <div class='row p-5'>
        <div class='px-3 col-2 back' style='cursor: pointer;'><p class='fs-3 fw-bold' style='color: #0038B8 !important;'>Back</p><p><i class="fas fa-arrow-circle-left fa-2x p-3" style='color: #0038B8 !important;'></i></p></div>
          <h1 class='name col-4 offset-3' style='color: #0038B8 !important;'>Subscription</h1>
      </div>
      <div class='subscription_levels row text-center p-5'>
            <div class='col-4'>
            <div class='p-5 reversed-primary-color rounded-3' style='border-style:solid;'>
              <p class='fs-2 fw-bold py-5'>Trial</p>
              <button type="button" class='btn btn-lg primary-color'>Select</button>
            </div>
            </div>
            <div class='col-4'>
            <div class='p-5 reversed-primary-color rounded-3' style='border-style:solid;'>
              <p class='fs-2 fw-bold py-5'>Basic</p>
              <button type="button" class='btn btn-lg primary-color'>Select</button>
            </div>
            </div>
            <div class='col-4'>
            <div class='p-5 reversed-primary-color rounded-3' style='border-style:solid;'>
              <p class='fs-2 fw-bold py-5'>Advanced</p>
              <button type="button" class='btn btn-lg primary-color'>Select</button>
            </div>
            </div>
          </div>
    </div>
    <div id='view_settings'  class='section container-fluid px-5 py-5 hidden'>
        <div class='row p-5'>
          <div class='px-3 col-2 back' style='cursor: pointer;'><p class='fs-3 fw-bold' style='color: #0038B8 !important;'>Back</p><p><i class="fas fa-arrow-circle-left fa-2x p-3" style='color: #0038B8 !important;'></i></p></div>
            <h1 class='name col-4 offset-3' style='color: #0038B8 !important;'>Settings</h1>
        </div>
        <div class='settings_options row text-center p-5 g-5 rounded-3 reversed-primary-color' style='border-style: solid;'>
        </div>
    </div>
    <div class='modal fade' id='closeModal' tabindex="-1" aria-labelledby="closeModalLabel" aria-hidden="true">
      <div class='modal-dialog modal-dialog-centered'>
        <div class='modal-content'>
          <div class='modal-header'>
            <h5 class='modal-title'>
              <span class='company_setup variable hidden'>Company Setup</span>
            </h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body reversed-primary-color">
            <p class='company_setup variable hidden'>To get started, please create your company profile.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
    <div class='modal fade' id='loginModal' tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
        <div class='modal-dialog modal-dialog-centered'>
            <div class='modal-content'>
              <div class='modal-header'>
                <h5 class='modal-title'>
                  <span class='demo variable hidden'>Account setup successful</span>
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body reversed-primary-color">
                <p class='demo variable hidden'>Please login to access your account.</p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              </div>
            </div>
        </div>
    </div>
    <div class='modal fade' id='homepageModal' tabindex="-1" aria-labelledby="homepageModalLabel" aria-hidden="true">
      <div class='modal-dialog modal-dialog-centered'>
        <div class='modal-content'>
          <div class='modal-header'>
            <h5 class='modal-title'>
              <span class='demo variable hidden'>Your request has been recorded.</span>
              <span class='register variable hidden'>Registration successful!</span>
            </h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body reversed-primary-color">
            <p class='demo variable hidden'>A team member will reach out ASAP.</p>
            <p class='register variable hidden'>We have sent an email with a confirmation link to your email address. In order to complete the sign-up process, please click the confirmation link.
              <br><br>
              If you do not receive a confirmation email, please check your spam folder.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
    <div class='modal fade' id='dashboardModal' tabindex="-1" aria-labelledby="dashboardModalLabel" aria-hidden="true">
      <div class='modal-dialog modal-dialog-centered'>
        <div class='modal-content'>
          <div class='modal-header'>
            <h5 class='modal-title'>
              <span class='group variable hidden'>Group created!</span>
            </h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body reversed-primary-color">
            <p class='group variable hidden'>Manage groups in the dashboard.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="formModal" tabindex="-1" aria-labelledby="formModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
      <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class='modal-header'>
              <div class='modal-title'>
                <h5 class='title'></h5>
              </div>
              <div class='section hidden'>
              </div>
              <div class='id hidden'>None</div>
            </div>
            <div class='modal-body'>
              <div class="container-fluid">
                <div id='errors' class='alert'>
                  <p id='no_psw' class='hidden'>Please enter new password!</p>
                  <p id='no_psw2' class='hidden'>Please confirm new password!</p>
                  <p id='no_match' class='hidden'>Passwords do not match!</p>
                </div>
                <p id='invalid_form' class='hidden alert text-center' style='color: red;'>Please correct errors and resubmit!</p>
                <div class='body'>
                </div>
              </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="submit btn primary-color">Save changes</button>
                <button class="btn primary-color loading_button hidden" type="button" disabled>
                  <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                  Loading...
              </button>
          </div>
      </div>
    </div>
    </div>
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <div class="modal-title"><h5 class='title'></h5></div>
            <div class='section hidden'>
            </div>
          </div>
          <div class="modal-body">
            <div class="container-fluid">
              <div class='body'>
              </div>
            </div>
          </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="submit btn primary-color">Delete</button>
                <button class="btn primary-color loading_button hidden" type="button" disabled>
                  <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                  Loading...
              </button>
          </div>
        </div>
      </div>
    </div>
</div>
{% endblock %}
{% block styles %}
{{ super() }}
{% endblock styles %}
{% block scripts %}
{{ super() }}
<script>


    var deleteModal = new bootstrap.Modal(document.getElementById('deleteModal'))
    var closeModal = new bootstrap.Modal(document.getElementById('closeModal'),{backdrop: 'static'})
    var loginModal = new bootstrap.Modal(document.getElementById('loginModal'),{backdrop: 'static'})
    var deleteModal = new bootstrap.Modal(document.getElementById('deleteModal'))
    var homepageModal = new bootstrap.Modal(document.getElementById('homepageModal'),{backdrop: 'static'})
    var dashboardModal = new bootstrap.Modal(document.getElementById('dashboardModal'),{backdrop: 'static'})
    var formModal = new bootstrap.Modal(document.getElementById('formModal'),{backdrop: 'static'})

    var dates = ['Created','MABD','Created']
    var money = ['Subtotal','Tax','Total','Unit Cost','Price']
    var mark_with_asterisk = ['SKU Name','Supplier Name']



    //general page
    function buildPage(){
        buildSimple();
        buildForms()
        buildOrders();
        buildSKUs();
        buildSuppliers();
        buildCompany();
        buildRecipient();
        buildGroups();
        buildAdmin();
        buildCalendar();
    };

    $('#dashboard_body').on('click','p.header',function(){
        viewPage(object=this)
    });

    $('.back').click(function(){

        var class_array = $(this).attr('class').split(/\s+/);

        var back_type = []
        for(i=0;i<class_array.length;i++){
            var class_name = class_array[i];
            if(class_name.startsWith('back_') == true){
                back_type.push(class_name);
            }
        };

        if(back_type.length > 0){
            var back_type = back_type[0]
            var new_section_id = back_type.split('_')[1]
            $('#content').children('#'+new_section_id+'.hidden').removeClass('hidden');
            $('#content').children().not('#'+new_section_id).not('.hidden').addClass('hidden');
        };

    });

    function formatDate(date){

      var date = new Date(date)

      var year = date.getFullYear()
      var month = (date.getMonth()+1).toString().padStart(2, "0")

      var day = (date.getDate()).toString().padStart(2, "0")

      return year+'-'+month+'-'+day;

    };


    $('.advanced.static').click(function(){

        $(this).parents('.section').find('.advanced').not('.static').removeClass('hidden');
        $(this).parent().children(':input.advanced').prop('checked',true)
        $(this).parent().children('.advanced').not(':input').addClass('active')
        $(this).parent().children(':input.basic').prop('checked',false)
        $(this).parent().children('.basic').not(':input').removeClass('active')

    })

    $('.basic.static').click(function(){
        $(this).parents('.section').find('.advanced').not('.static').addClass('hidden');
        $(this).parent().children(':input.basic').prop('checked',true)
        $(this).parent().children('.basic').not(':input').addClass('active')
        $(this).parent().children(':input.advanced').prop('checked',false)
        $(this).parent().children('.advanced').not(':input').removeClass('active')

    })




    unlocked = ['homepage','login','book_demo','register'];


    function loadPage(page,id=null){
        return new Promise((resolve,reject) => {
            console.log(page)
            console.log(id)
            var save_page = page;
            var page_id = '#'+page;
            $('#'+page).find('.error').not('.hidden').addClass('hidden');

            if(id == null){
                $(page_id).find('.section_id').html('');
                $(page_id).find('.header').find('.new.hidden').removeClass('hidden');
                $(page_id).find('.header').find('.edit').not('.hidden').addClass('hidden')

                var result = {'page':page}

                clear_pages = ['new_order','new_sku','new_supplier','new_recipient','new_group']
                if(clear_pages.includes(page)){
                    $(page_id).find('input').not('button').val('');
                };

                if(page == 'new_order'){
                    $('#new_order').find('.line_items').children().not(':first').remove()
                    var accordion_objects = $('#order_setup_accordation').find('.accordion-collapse.collapse').not(':first');
                    $(accordion_objects).removeClass('show');
                }else if(page == 'company'){
                    $('#company').find('.edit.hidden').removeClass('hidden');
                    $('#company').find('.change_logo').addClass('hidden');
                    $('#company').find('.submit').addClass('hidden');
                    $('#company').find('.cancel_edit').addClass('hidden');
                    $('#company').find(':input').not('button').not('.file').prop('disabled',true);
                    $('#company').find('.error').not('.hidden').addClass('hidden');
                    $('#company').find(':input.is-valid').removeClass('is-valid');
                    $('#company').find(':input.is-invalid').addClass('is-invalid');
                    $('#company').find('.loading_button').addClass('hidden');
                };
            }else{
                try{
                    $('#content').children('#'+save_page).find('.section_id').html(id);
                }catch{
                    $('#content').children('#'+save_page).find('.section_id').html('');
                };
                $('#'+page).find('.header').find('.new').not('.hidden').addClass('hidden');
                $('#'+page).find('.header').find('.edit.hidden').removeClass('hidden');
                var result = {'page':page,'id':id};
                if(page == 'supplier'){
                    loadSupplierPage(id).then(supplier => {
                      $('#supplier').find('.name').html(supplier['name'])
                      $('#supplier').find('.total').html(supplier['Order Count'])
                      $('#supplier').find('.shipped').html(supplier['Shipped Count'])
                      $('#supplier').find('.delivered').html(supplier['Delivered Count'])
                      $('#supplier').find('.foreign_id').html(supplier['foreign_id'])
                    });

                    buildOrders(per_page=5,page=1,sku_id=null,supplier_id=id,container_id='supplier_orders');
                    buildSKUs(per_page=5,page=1,supplier_id=id,group_id=null,container_id='supplier_skus');

                    $('#supplier').find('.supplier_id').html(id)
                }else if(page == 'sku'){
                    loadSKUPage(id).then(sku => {
                      $('#sku').find('.name').html(sku['name'])
                      $('#sku').find('.total').html(sku['Order Count'])
                      $('#sku').find('.shipped').html(sku['Shipped Count'])
                      $('#sku').find('.delivered').html(sku['Delivered Count'])
                      $('#sku').find('.foreign_id').html(sku['foreign_id'])
                      $('#sku').find('.supplier_id').html(sku['supplier_id'])
                      $('#sku').find('.supplier_name').html(sku['Supplier'])
                      var supplier_id = 'supplier_id_'+sku['supplier_id']
                      $('#sku').find('.supplier_name').attr('id',supplier_id)
                      $('#sku').find('.sku_id').html(sku_id)
                    });
                    buildOrders(per_page=5,page=1,sku_id=id,supplier_id=null,container_id='sku_orders');
                    $('#sku').find('.sku_id').html(sku_id)
                }else if(page == 'group'){
                    buildSKUs(per_page=5,page=1,supplier_id=null,group_id=id,container_id='group')
                    loadGroupPage(id).then(result => {
                        var group = result['group'];
                        $(page_id).find('.name').html(group['name'])
                    });
                }else if(page == 'order'){
                    viewOrder(order_id=id);
                }else if(page == 'new_order'){
                    var accordion_objects = $('#order_setup_accordation').find('.accordion-collapse.collapse').not('.show');
                    $(accordion_objects).addClass('show')

                    loadOrder(order_id=id).then(result => {
                          var order = result['order'];
                          var skus = result['skus'];
                          return Promise.all([fillOrder(order),addSkus(skus)]);
                      }).then(result => {
                          console.log(result)
                          console.log(result[1])
                          return fillSkus(result[1]);
                      })
                }else if(page == 'new_sku'){
                    loadSKU(sku_id=id).then(result => {
                        console.log(result)
                        $(page_id).find('.select_supplier').val(result['supplier_id'])
                        $(page_id).find('.foreign_id').val(result['foreign_id'])
                        $(page_id).find('.name').val(result['name'])
                        $(page_id).find('.cost').val(result['cost'])
                        $(page_id).find('.price').val(result['price'])
                        $(page_id).find('.weight').val(result['unit_weight'])
                        $(page_id).find('.unit_x').val(result['unit_x'])
                        $(page_id).find('.unit_y').val(result['unit_y'])
                        $(page_id).find('.unit_z').val(result['unit_z'])
                        $(page_id).find('.pack_qty').val(result['pack_qty'])
                        $(page_id).find('.pack_weight').val(result['pack_weight'])
                        $(page_id).find('.pack_x').val(result['pack_x'])
                        $(page_id).find('.pack_y').val(result['pack_y'])
                        $(page_id).find('.pack_z').val(result['pack_z'])

                    })
                }else if(page == 'new_supplier'){
                    loadSupplier(supplier_id=id).then(result => {
                        console.log(result)
                        $(page_id).find('.name').val(result['name'])
                        $(page_id).find('.foreign_id').val(result['foreign_id'])
                        $(page_id).find('.email').val(result['email'])
                        $(page_id).find('.phone').val(result['phone'])
                        $(page_id).find('.street').val(result['street'])
                        $(page_id).find('.city').val(result['city'])
                        $(page_id).find('.zip').val(result['zip'])
                        $(page_id).find('.country').val(result['country'])
                        $(page_id).find('.state').val(result['state'])
                    })
                }else if(page == 'new_recipient'){
                    load_recipient(recipient_id=id).then(recipient => {
                        console.log(recipient)
                        console.log($(page_id))
                        $(page_id).find('.name').val(recipient['name'])
                        $(page_id).find('.phone').val(recipient['phone'])
                        $(page_id).find('.street').val(recipient['street'])
                        $(page_id).find('.phone').val(recipient['phone'])
                        $(page_id).find('.street').val(recipient['street'])
                        $(page_id).find('.city').val(recipient['city'])
                        $(page_id).find('.zip').val(recipient['zip'])
                        $(page_id).find('.country').val(recipient['country'])
                        $(page_id).find('.state').val(recipient['state'])
                    })
                }else if(page == 'new_group'){

                    $(page_id).find('input').not('button').val('');
                    loadGroupPage(group_id=id).then(result => {
                        var group = result['group'];
                        $(page_id).find('.name').val(group['name'])
                    })

                    loadGroupSKUs(group_id=id).then(skus => {
                       var existing_row_count = $(page_id).find('tbody').find('tr').length;
                       var dif = skus.length-existing_row_count;
                       return new_group_add_sku(count=dif,skus=skus)
                    }).then(skus => {
                        console.log(skus)
                        return new_group_fill_suppliers(skus)
                    }).then(supplier_ids => {
                        console.log('test 1')
                        var result = [];
                        for(i=0;i<supplier_ids.length;i++){
                            var supplier_id = supplier_ids[i];
                            var container = $(page_id).find('tbody').find('tr').eq(i);
                            result.push(active_skus(supplier_id=supplier_id,sku_id=null,container=container))
                        };
                        return Promise.all(result)
                    }).then(result => {
                        console.log(result)
                        console.log(id)
                        return loadGroupSKUs(group_id=id)
                    }).then(skus => {
                        console.log(skus)
                        for(i=0;i<skus.length;i++){
                            var sku = skus[i];
                            $(page_id).find('tbody').find('tr').eq(i).find('.select_sku').val(sku['sku_id']);
                        }
                    }).catch(error => {
                        console.log(error)
                    })
                }
            }

            $('#content').children('#'+save_page+'.hidden').removeClass('hidden');
            $('#content').children().not('#'+save_page).not('.hidden').addClass('hidden');
            window.scrollTo(0,0);

            resolve(result)

        })
    }






    function selectPage(object){
        return new Promise((resolve,reject) => {
            var class_array = $(object).attr('class').split(/\s+/);
            var view_type = []
            for(i=0;i<class_array.length;i++){
                var class_name = class_array[i];
                if(class_name.startsWith('view_') == true){
                    view_type.push(class_name);
                }
            };

            if(view_type.length > 0){
                var view_type = view_type[0];

                if(view_type.startsWith('view_')) {
                  // PREFIX is exactly at the beginning
                  page = view_type.slice('view_'.length);
                };

                try{
                    var id = $(object).attr('id').split('_')[2];
                }catch{
                    var id = null;
                };

                var result = {'page':page,'id':id};
                resolve(result)
            }else{
                reject('unkown view')
            }


        })}

    function viewPage(object=null,page=null,id=null){

        if(object != null){
            selectPage(object=object,id=id).then(result => {
                return loadPage(page=result['page'],id=result['id'])
            }).then(result => {
                console.log(result)
            }).catch(error => {
                console.log(error)
            })
        }else if(page != null){
            loadPage(page=page,id=id).then(result => {

            }).catch(error => {
                console.log(error)
            })
        }else{
            console.log('unknown view')
        };
    }

    $('#content').on('click','.add',function(){
        var section = $(this).parentsUntil('.dashboard_item').parent('.dashboard_item').attr('id').split('_')[1];

        if(section.endsWith('s')){
            var section = section.slice(0, -1);
        };

        var page = 'new_'+section;

        viewPage(object=null,page=page,id=null)
    })

    $(document).on('click','.view',function(){
        viewPage(object=this)
    });

    //dashboard simple
    function buildSimple(){
        buildSimpleOrders();
        buildSimpleSKUs();
        buildSimpleSuppliers();
        buildSimpleGroups();
    };

    //forms
    function buildForms(){
        buildPOForm();
        buildSKUForm();
        buildGroupForm();
    }

    function buildGroupForm(container_id='new_group'){
        active_suppliers(supplier_id=null,container_id=container_id);
    }

    function buildPOForm(container_id='new_order'){
        active_company(container_id=container_id)
        active_recipients(container_id=container_id)
        active_suppliers(supplier_id=null,container_id=container_id)
    };

    function buildSKUForm(container_id='new_sku'){
        active_suppliers(supplier_id=null,container_id=container_id)
    };

    //orders
    function buildOrders(per_page=5,page=1,sku_id=null,supplier_id=null,container_id='orders'){
        load_dashboard_orders(per_page=per_page,page=page,sku_id=sku_id,supplier_id=supplier_id,container_id=container_id).then(result => {
          return write_orders(data=result['data'],count=result['count'],per_page=result['per_page'],page=result['page'],container_id=result['container_id']);
        }).then(container_id => {
          return edit_table(container_id);
        }).catch(error => {return error.toString()})
    };

    function buildSimpleOrders(){
        load_simple_orders().then(data => {
            write_simple_orders(data)
        });
    };

    function load_simple_orders(){
        return new Promise((resolve,reject) => {
            $.ajax({
                type: 'POST',
                url : "{{ url_for('main.load_simple_orders') }}",
                success: function(result){
                    resolve(result['simple_orders'])
                },
                error: function (error) {
                    reject(error)
                }
            })
        });
    };

    function load_dashboard_orders(per_page,page,sku_id,supplier_id,container_id){
        return new Promise((resolve,reject) => {
            $.ajax({
                type: 'POST',
                url : "{{ url_for('main.load_dashboard_orders') }}",
                data: JSON.stringify({'per_page':per_page,'page':page,'sku_id':sku_id,'supplier_id':supplier_id,'container_id':container_id},null,'\t'),
                contentType: 'application/json;charset=UTF-8',
                success: function(result){
                    resolve(result)
                },
                error: function (error) {
                    reject(error)
                }
            })
        });
    };

    function write_simple_orders(data){
        return new Promise((resolve,reject) => {
            var recent_html = []
            if(data<3){
                var length = data.length;
            }else{
                var length = 3;
            }
            for(i=0;i<length;i++){
              var order = data[i];
              var supplier = '<td><p id="supplier_id_'+order['supplier_id']+'" class="view view_supplier">'+order['Supplier']+'</p></td>';
              var order_id = '<td><p id="order_id_'+order['order_id']+'" class="view view_order">'+order['Order ID']+'</p></td>';
              var created = '<td>'+displayDate(order['Created'])+'</td>';
              var order_html = [supplier,order_id,created];
              //console.log(order_html)
              var order_html = order_html.join('');
              //console.log(order_html)
              var order_html = '<tr id="order_id_'+order['order_id']+'"">'+order_html+'</tr>';
              //console.log(order_html)
              recent_html.push(order_html);
            };
            //console.log(recent_html)
            var recent_html = recent_html.join('');
            //console.log(recent_html)
            $('#simple_orders').find('table').children('tbody').html(recent_html);
        })
    }


    function write_orders(data,count,per_page,page,container_id){
            return new Promise((resolve,reject) => {
                var container = '#'+container_id;
                //console.log(data)

                var columns = ['Action','Order ID','Supplier','Created','MABD','Status'];
                var advanced = ['Subtotal','Tax','Total','SKU Count'];

                var columns_html = '<th>'+columns.join('</th><th>')+'</th>';

                var advanced_html = '<th class="advanced hidden">'+advanced.join('</th><th class="advanced hidden">')+'</th>';

                var head_html = columns_html+advanced_html

                $(container).find('.head').html(head_html);

                var rows = [];

                var example_asterisk = '<div style="font-weight: bold;">Example</div>'

                for(i=0;i<data.length;i++){
                    var row = data[i];

                    var example = row['Example']
                    var values = [];
                    var asterisk = ''
                    for(j=0;j<columns.length;j++){
                        var column = columns[j];

                        var value = row[column];
                        if(dates.includes(column)){
                            var value_html = '<td>'+displayDate(value)+'</td>'
                        }else if(column == 'Action'){
                            var order_id = row['order_id'];
                            var value_html = '<td class="action" id="order_id_'+order_id+'"><div class="dropdown"><button class="btn dropdown-toggle show update" type="button" data-bs-toggle="dropdown" aria-expanded="true"></button><ul class="dropdown-menu" aria-labelledby="dropdownMenuButton2"><li><a class="dropdown-item edit" style="cursor:pointer;"><span class="reversed-primary-color">Edit </span><i class="fas fa-edit reversed-primary-color "></i></a></li><li><hr class="dropdown-divider"></li><li><a class="dropdown-item delete" style="cursor:pointer;"><span class="reversed-primary-color">Delete </span><i class="fas fa-trash-alt reversed-primary-color "></i></a></li><li><hr class="dropdown-divider"></li><li><a class="dropdown-item edit reversed-primary-color" style="cursor:pointer;">Download PDF </span><i class="far fa-cloud-download reversed-primary-color"></i></a></li><li><hr class="dropdown-divider"></li><li><a class="dropdown-item send reversed-primary-color" style="cursor:pointer;">Send </span><i class="fas fa-paper-plane reversed-primary-color"></i></a></li></ul></div></td>';
                        }else if(column == 'Order ID'){
                            var order_id = row['order_id'];
                            if(row['Example'] == 1){
                                var asterisk = example_asterisk
                            }
                            var access_code = row['access_code'];
                            var value_html = '<td><p id="order_id_'+order_id+'" class="view view_order" style="cursor: pointer;">'+value+'</p> '+asterisk+'</td>'
                        }else if(column == 'Supplier'){
                          var id = row['supplier_id'];
                          var id = 'supplier_id_'+id;
                          var value_html = '<td><p id='+id+' class="view view_supplier">'+value+'</p></td>';
                        }else if(mark_with_asterisk.includes(column)){
                            var is_example_sku = row['Example']
                            if(is_example_sku == '1'){
                                var asterisk = example_asterisk
                            }
                            var value_html = '<td>'+value+' '+asterisk+'</td>';
                        }else if(money.includes(column)){
                          var value_html = '<td class="money">'+value+'</td>';
                        }else if(column == 'Status'){

                          if(value == 1){
                            var value = 'Ordered';
                          }else if(value == 2){
                            var value = 'Shipped';
                          }else if(value == 3){
                            var value = 'Delivered';
                          };
                          var status_id = 'status_'+order_id
                          var value_html = '<td class="reversed-primary-color status" id='+status_id+'><div class="dropdown status"><button class="btn primary-button dropdown-toggle show status" type="button" data-bs-toggle="dropdown" aria-expanded="true">'+value+'</button><ul class="dropdown-menu status" aria-labelledby="dropdownMenuButton2"><li><a class="dropdown-item 1" style="cursor:pointer;"><span class="reversed-primary-color">Ordered </span><i class="far fa-file-invoice reversed-primary-color "></i></a></li><li><hr class="dropdown-divider"></li><li><a class="dropdown-item 2" style="cursor:pointer;"><span class="reversed-primary-color">Shipped </span><i class="fas fa-shipping-fast reversed-primary-color "></i></a></li><li><hr class="dropdown-divider"></li><li><a class="dropdown-item 3" style="cursor:pointer;"><span class="reversed-primary-color">Delivered </span><i class="fas fa-box-full reversed-primary-color"></i></a></li></ul></div></td>';
                        }else{
                            var value_html = '<td>'+value+'</td>';
                        };

                        values.push(value_html);
                    };

                    for(j=0;j<advanced.length;j++){
                        var column = advanced[j];
                        var value = row[column];
                        if(money.includes(column)){
                            var value_html = '<td class="advanced hidden money">'+value+'</td>';
                        }else if(dates.includes(column)){
                            var value_html = '<td class="advanced hidden">'+displayDate(value)+'</td>'
                        }else{
                            var value_html = '<td class="advanced hidden">'+value+'</td>';
                        }

                        values.push(value_html)
                    }

                    var row_html = '<tr>'+values.join('')+'</tr>';
                    rows.push(row_html);

                };

                var body_html = rows.join('');

                $(container).find('.body').html(body_html);

                var pagination_result = pagination(per_page=per_page,page=page,data_length=count);

                $(container).find('.pages').html(pagination_result['pagination_html']);
                $(container).find('.showing_rows').html(pagination_result['rows_html']);


                if(page==1){
                  $(container).find('.prev').addClass('hidden');
                };
                if(per_page > count){
                  $(container).find('.next').addClass('hidden');
                }

                resolve(container_id)

        })};

    function viewOrder(order_id,container_id='order'){
        var container = $('#'+container_id)

        loadOrder(order_id).then(result => {


            var order = result['order'];
            var skus = result['skus'];

            // $(container).find('#order_id').html(order['order_id']);
            if(order['status'] == 1){
                var status = 'Ordered';
            }else if(order['status'] == 2){
                var status = 'Shipped';
            }else if(order['status'] == 3){
                var status = 'Delivered';
            };

            if(order['status'] > 0){
                $('#order').find('.order_status.hidden').removeClass('hidden');
                $('#order').find('.order_status').html(status);
            }else{
                $('#order').find('.order_status').not('.hidden').addClass('hidden');
            };

            $('#order').find('.order_id').html(order['foreign_id'])

            $('#order').find('.created').html(order['created'])
            $('#order').find('.sent').html(order['order_date'])


            if(order['extension'] != 'None'){
                var image_name = order['image_name'].toString();
                var extension = order['extension'].toString();
                var image_html = image_name+extension;
                $(container).find('.company_title').find('.logo.hidden').removeClass('hidden');
                $(container).find('.company_title').find('.logo').html('<img class="img-fluid company_logo" src="/static/uploads/'+image_html+'">');
            }else{
              $(container).find('.company_title').find('.logo').not('.hidden').addClass('hidden');
            };

            $(container).find(".id").html(order['order_id'])
            $(container).find('.company_name').html(order['company_name']);
            $(container).find('.order_foreign_id').html(order['foreign_id']);
            $(container).find('.order_date').html(order['order_date'])

            $(container).find('.company_address').find('.street_address').html(order['company_street'])
            $(container).find('.company_address').find('.city').html(order['company_city'])
            $(container).find('.company_address').find('.state').html(order['company_state'])
            $(container).find('.company_address').find('.zip').html(order['company_zip'])
            $(container).find('.company_address').find('.country').html(order['company_country'])
            $(container).find('.company_address').find('.email').html(order['company_email'])
            $(container).find('.company_address').find('.phone').html(order['company_phone'])

            $(container).find('.vendor_name').html(order['supplier_name'])
            $(container).find('.vendor_address').find('.street_address').html(order['supplier_street'])
            $(container).find('.vendor_address').find('.city').html(order['supplier_city'])
            $(container).find('.vendor_address').find('.state').html(order['supplier_state'])
            $(container).find('.vendor_address').find('.zip').html(order['supplier_zip'])
            $(container).find('.vendor_address').find('.country').html(order['supplier_country'])
            $(container).find('.vendor_address').find('.email').html(order['supplier_email'])

            if(order['ship_to_company'] == 1){
                    $(container).find('.ship_address').find('.street_address').html(order['company_street'])
                    $(container).find('.ship_address').find('.city').html(order['company_city'])
                    $(container).find('.ship_address').find('.state').html(order['company_state'])
                    $(container).find('.ship_address').find('.zip').html(order['company_zip'])
                    $(container).find('.ship_address').find('.country').html(order['company_country'])
                    $(container).find('.ship_address').find('.email').html(order['company_email'])
                try{
                    $(container).find('.ship_address').find('.phone').html(order['company_phone'])
                }catch{
                    $(container).find('.ship_address').find('.phone').html('')
                }

            }else if(order['ship_to_company'] == 0){
                    $(container).find('.ship_address').find('.street_address').html(order['recipient_street'])
                    $(container).find('.ship_address').find('.city').html(order['recipient_city'])
                    $(container).find('.ship_address').find('.state').html(order['recipient_state'])
                    $(container).find('.ship_address').find('.zip').html(order['recipient_zip'])
                    $(container).find('.ship_address').find('.country').html(order['recipient_country'])
                    $(container).find('.ship_address').find('.email').html(order['recipient_email'])
                try{
                    $(container).find('.ship_address').find('.phone').html(order['recipient_phone'])
                }catch{
                    $(container).find('.ship_address').find('.phone').html('')
                }
            };

            $(container).find('.mabd').html(order['mabd'])
            $(container).find('.shipping_method').html(order['shipping_method'])
            $(container).find('.shipping_terms').html(order['shipping_terms'])

            var skus_html = [];

            console.log(skus)
            for(i=0;i<skus.length;i++){
                var sku = skus[i];
                var cost = currency(sku['cost']).format()
                var amount = currency(sku['cost']).multiply(sku['quantity']).format()
                var sku_html = "<tr><td>"+sku['foreign_id']+"</td><td>"+sku['name']+"</td><td>"+sku['quantity']+"</td><td class='money'>"+cost+"</td><td>"+amount+"</td></tr>";

                skus_html.push(sku_html);
            }

            var skus_html = skus_html.join('');

            $(container).find('.order_skus').html(skus_html);

            if(order['notes'] != 'None'){
                $(container).find(".notes").html(order['notes'])
            };

            $(container).find('.subtotal').html(currency(order['subtotal']).format());
            $(container).find('.tax_rate').html(order['tax_rate']);
            $(container).find('.tax').html(currency(order['tax']).format());
            $(container).find('.total').html(currency(order['total']).format());


            if(order['status'] == 1){
              var status = 'Ordered';
            }else if(order['status'] == 2){
              var status = 'Shipped';
            }else if(order['status'] == 3){
              var status = 'Delivered';
            }else{
              var status = '';
            };


            var delivered_date = order['delivered_date']
            if(delivered_date != 'None'){
              var delivered_date_object = $('#order').find('.delivered_date');
              $(delivered_date_object).removeClass('hidden');
              $(delivered_date_object).html(' on '+order['delivered_date'])
            }

        })

    }

    function loadOrder(order_id){
        return new Promise((resolve,reject) => {
            $.ajax({
                type: 'POST',
                url : "{{ url_for('main.load_order') }}",
                data: JSON.stringify({'order_id':order_id},null,'\t'),
                contentType: 'application/json;charset=UTF-8',
                success: function(result){
                    resolve(result)
                },
                error: function (error) {
                    reject(error)
                }
            })
        })
    };

    function upload_logo(order_id){
      return new Promise((resolve,reject) => {

        var file_select = document.getElementById(('logo'))
        var files = file_select.files;
        var file = files[0]
        var form_data = new FormData();
        form_data.append('file',file)
        form_data.append('order_id',order_id.toString())


        $.ajax({
          type: 'POST',
          url : "{{ url_for('main.upload_logo') }}",
          data: form_data,
          contentType: false,
          cache: false,
          processData: false,
          success: function(result){
              resolve(result)
            },error: function(error){
              reject('fail')
            }
        });

    })};

    function submit_po(){
      return new Promise((resolve,reject) => {

      //handle line items
      var order_id = $('#new_order').find('.section_id').html();

      var item_count  = $('#new_order').find('.line_item').length;

      var items = $('#new_order').find('.line_item');

      var item_array = [];

      for(i=0;i<item_count;i++){
        var item = items.eq(i);
        var sku_id = item.find('.select_sku').val();
        var quantity = item.find('.quantity').val();

        var item_object = {'sku_id':sku_id,'quantity':quantity};

        item_array.push(item_object);
      }
      input_array = []
      //handle inputs
      var tax_rate = $('#new_order').find('.tax_rate').html();
      input_array.push({'id':'tax_rate','value':tax_rate})

      if($('#new_order').find('.ship_to_company').prop('checked') == true){
        var value = '1'
      }else{
        var value = '0'
      }

      input_array.push({'id':'ship_to_company','value':value});


      var status = $('#order_setup_status').find('button.picked').attr('id')
      var status = status.slice(-1);
      input_array.push({'id':'status','value':status})

      if(status == '3'){
        var delivery_date = $('.body').find('#order_setup_delivered_date').val();
      }else{
        var delivery_date = null;
      };
      input_array.push({'id':'delivered_date','value':delivery_date});

      var tax_rate = $('#order_setup_tax_rate').html();
      input_array.push({'id':'tax_rate','value':tax_rate})

      if($('#order_setup_ship_to_company').prop('checked') == true){
        var value = '1'
      }else{
        var value = '0'
        var recipient_id = $('#order_setup_select_recipient').val();
        input_array.push({'id':'recipient_id','value':recipient_id})
      }
      input_array.push({'id':'ship_to_company','value':value})


      var foreign_id = $('#order_setup_foreign_id').val();
      input_array.push({'id':'foreign_id','value':foreign_id});


      var order_date = $('#order_setup_order_date').val();
      input_array.push({'id':'order_date','value':order_date});

      var mabd = $('#order_setup_mabd').val();
      input_array.push({'id':'mabd','value':mabd});

      var shipping_method = $('#order_setup_shipping_method').val();
      input_array.push({'id':'shipping_method','value':shipping_method});

      var shipping_terms = $('#order_setup_shipping_terms').val();
      input_array.push({'id':'shipping_terms','value':shipping_terms});

      var notes = $('#order_setup_notes').val();
      input_array.push({'id':'order_notes','value':notes});

      $.ajax({
            type: 'POST',
            url: "{{ url_for('main.post_po') }}",
            contentType: 'application/json;charset=UTF-8',
            data: JSON.stringify({'items':item_array,'inputs':input_array,'order_id':order_id},null,'\t'),
            success: function(result){
              resolve(result)
              console.log(result)
            },error: function(error){
              reject('fail')
              console.log('post_po error: '+error)
            }
    })

    })};


    function validateOrderSetupSections(){
        return new Promise((resolve,reject) => {

            //validate my address section
            if(($('#order_setup_select_company').hasClass('is-valid') == true && $('#order_setup_ship_to_company').prop('checked') == true) || ($('#order_setup_select_company').hasClass('is-valid') == true && $('#order_setup_select_recipient').hasClass('is-valid'))){
            $('#order_setup_my_address').find('.fa-check').removeClass('hidden');
            $('#order_setup_my_address').find('.fa-times').addClass('hidden');
            }else{
            $('#order_setup_my_address').find('.fa-check').addClass('hidden');
            $('#order_setup_my_address').find('.fa-times').removeClass('hidden');
            };
            //validate supplier section
            if($('#order_setup_select_supplier').hasClass('is-valid')){
            $('#order_setup_supplier').find('.fa-check').removeClass('hidden');
            $('#order_setup_supplier').find('.fa-times').addClass('hidden');
            }else{
            $('#order_setup_supplier').find('.fa-check').addClass('hidden');
            $('#order_setup_supplier').find('.fa-times').removeClass('hidden');
            }

            //validate sku section
            if($('#order_setup_skus').find('.is-invalid').length == 0){
            $('#order_setup_skus').find('.fa-check').removeClass('hidden');
            $('#order_setup_skus').find('.fa-times').addClass('hidden');
            }else{
            $('#order_setup_skus').find('.fa-check').addClass('hidden');
            $('#order_setup_skus').find('.fa-times').removeClass('hidden');
            }

            //validate details section
            if($('#order_setup_details').find('.is-invalid').length == 0){
            $('#order_setup_details').find('.fa-check').removeClass('hidden');
            $('#order_setup_details').find('.fa-times').addClass('hidden');
            }else{
            $('#order_setup_details').find('.fa-check').addClass('hidden');
            $('#order_setup_details').find('.fa-times').removeClass('hidden');
            }

            resolve('Great success')
        })
    }

  $('#new_order').on('click','.remove_line_item',function(){
    removeItem(this);
  })


  function removeItem(element){
    $(element).parents()[1].remove()
  };


  function addRow(){
    return new Promise((resolve) => {
      var line_item_html = $('.line_item').first().html();
      $('#line_items').append('<div class="row line_item py-3">'+line_item_html+'</div>');

      resolve('Great success')
    }
    )
  };

  function addItem(){
    addRow().then(result => {
      $('.line_item').last().find('.remove_line_item').removeClass('hidden');
      $('.line_item').last().find('.sku_id').html('');
      $('.line_item').last().find('input').val('');
      $('.line_item').last().find('.pack_qty').val('1');
      $('.line_item').last().find('.is-valid').removeClass('is-valid')
      $('.line_item').last().find('.is-invalid').removeClass('is-invalid')
      $('.line_item').last().find('.amount').html('-');
    });
  };



    $('#new_order').change(function(){
        validateForm(page='new_order').then(result => {
            validateOrderSetupSections()
        })
    })

    $('#order').on('click','.edit',function(){
        var order_id = $('#order').find('.section_id').html();

        viewPage(object=null,page='new_order',id=order_id)
    });



    function fillOrder(order){
        return new Promise((resolve,reject) => {
            var container = '#new_order'
            if(order['ship_to_company'] == '1'){
                $(container).find('.ship_to_company').prop('checked',true);
            }else{
                $(container).find('.ship_to_company').prop('checked',false);
                $(container).find('.select_recipient').val(order['recipient_id'])
            };

            $(container).find('.select_supplier').val(order['supplier_id'])

            $(container).find('.tax_rate').html(order['tax_rate'])

            var status_id = '#order_setup_'+order['status']
            $(container).find(status_id).addClass('picked');
            $(container).find('.status.picked').not(status_id).removeClass('picked');
            $(container).find('.tax').html(order['tax'])
            $(container).find('.subtotal').html(order['subtotal'])
            $(container).find('.total').html(order['total'])
            $(container).find('.order').val(order['foreign_id'])
            $(container).find('.order_date').val(formatDate(order['order_date']))
            $(container).find('.mabd_date').val(formatDate(order['mabd']))
            $(container).find('.shipping_method').val(order['shipping_method'])
            $(container).find('.shipping_terms').val(order['shipping_terms'])
            $(container).find('.notes').val(order['notes'])
            var result = active_skus(supplier_id=order['supplier_id'],sku_id=null,container=$('new_order'))
            resolve(result['data'])



        })

    };

    function addSkus(skus){
      return new Promise((resolve) => {
        var supplier_id = skus[0]['supplier_id'];
        var sku_count = skus.length;
        for(i=1;i<sku_count;i++){
          addItem()
        };
        resolve(skus)

      })

    };


    function fillSkus(skus){
      return new Promise((resolve) => {
        console.log('fill skus: '+skus)
        for(i=0;i<skus.length;i++){
          var item = $('#line_items').find('.line_item').eq(i);
          var item_data = skus[i];
          console.log(item_data['sku_id'])
          console.log($(item).find('input.select_sku'))
          $(item).find('input.foreign_id').val(item_data['foreign_id'])
          $(item).find('.select_sku').val(item_data['sku_id'])
          $(item).find('input.pack_qty').val(item_data['pack_qty'])
          $(item).find('input.quantity').val(item_data['quantity'])
          $(item).find('input.cost').val(item_data['cost'])

          $(item).find('input.amount').val(currency(item_data['cost']).multiply(item_data['quantity']).format())

        };
      })
    };



        $('#new_order').on('click','.ship_to_company',function(){
            if($('#new_order').find('.ship_to_company').is(':checked')){
                $('#new_order').find('.recipient_address').not('.hidden').addClass('hidden');
            }else{
                $('#new_order').find('.recipient_address').removeClass('hidden');
            }
        });

        $('#new_order').on('change','.select_supplier',function(){
            active_skus(supplier_id=$(this).val(),sku_id=null,container=$('new_order'))
        });

    function calculateSubtotal(){
        return new Promise((resolve) => {
          var item_count = $('#new_order').find('.amount').length;
          var subtotal = 0;

          for(i=0;i<item_count;i++){
            var amount = $('#new_order').find('.amount').eq(i).val();
            if(amount != 'Error' && amount != '-'){
              var subtotal = currency(amount).add(subtotal).value;
            }
          };

          var subtotal = currency(subtotal).format()

          resolve(subtotal)
        })
      };

    function updateSubtotal(){
        calculateSubtotal().then(result => {
          $('#new_order').find('.subtotal').html(result)
          var subtotal = currency(result).value
          var tax_rate = $('#new_order').find('.tax_rate').html()
          return calculateTax(tax_rate,subtotal)
        }).then(result => {
          var tax = result['tax'];
          var total = result['total'];
          $('#new_order').find('.tax').html(tax)
          $('#new_order').find('.total').html(total)


        })
      };


        $('#new_order').on('change','.select_sku',function(){
            var sku_id = $(this).val();
            var row = $(this).parentsUntil('#line_items')
            if(sku_id != 'None'){
                loadSKU(sku_id).then(result => {
                $(row).find('.pack_qty').val(result['pack_qty'])
                $(row).find('.quantity').val(result['pack_qty'])
                $(row).find('.cost').val(currency(result['cost']).format())
                $(row).find('.amount').val(currency(currency(result['cost']).multiply(result['pack_qty'])).format())
                $(row).find('.quantity').attr('step',result['pack_qty'])
                $(row).find('.quantity').addClass('is-valid')
                $(row).find('.quantity').removeClass('is-invalid')
                return 'pass'
            }).then(result => {
                updateSubtotal()
            })
            }
        });

        $('#new_order').on('click','.add_line_item',function(){
            addItem()
        })

        $('#new_order').on('click','.status',function(){
            $(this).addClass('picked');
            $(this).siblings('button.picked').removeClass('picked');
        })

        function updateTaxRate(){
            var new_rate = $('#new_order').find('.new_tax').val();
            if(new_rate == ''){
              var new_rate = 0
            }
            $('#new_order').find('.tax_rate').html(new_rate)
            updateSubtotal()
          };

        function calculateTax(tax_rate,subtotal){
            try{
              var tax = (tax_rate/100)*subtotal;

              var tax = currency(tax).format();

              var tax_val = currency(tax).value;


              var total = currency(subtotal).add(tax).format();

              return {tax,total}
            }catch{
              return 'fail'
            }

          };

        $('#new_order').on('click','.edit_tax',function(){
            $('#new_order').find('.edit_tax').addClass('hidden');
            $('#new_order').find('.change_tax_section').removeClass('hidden')
        })

        $('#new_order').on('click','.close_tax',function(){
            $('#new_order').find('.edit_tax').removeClass('hidden');
            $('#new_order').find('.change_tax_section').addClass('hidden')
            updateTaxRate()
        })


        $('#new_order').on('change','.quantity',function(){
            changeQuantity(this)
        })

        // $('#new_order').on('change','.cost',function(){
        //     updateAmount(this)
        // })

        function changeQuantity(element){
            updateAmount(element);
            validateQuantity(element);
            }

        // function changeCost(element){
        //     updateAmount(element);
        //     validateString(element);
        //     }

        function calculateAmount(quantity,cost){
            return new Promise((resolve) => {

              var amount = currency(quantity).multiply(cost).format();

              if(amount == '-$NaN'){
                resolve('Error')
              };

              resolve(amount);
            });
          };

        function updateAmount(element){
            var row = $(element).parents()[2]

            var cost_element = $(row).find('.cost');

            var quantity_element = $(row).find('.quantity');

            var cost = $(cost_element).val();
            var cost = currency(cost)
            var quantity = $(quantity_element).val();


            calculateAmount(quantity,cost).then(result => {
              $(row).find('.amount').val(result)
            }).then(result => {
              updateSubtotal()

            });

          }

        function validateQuantity(object){
          var input = $(object).parent();
          var input = $(input).parent();
          var row = $(input).parent();

          var sku = $(row).find('.select_sku').val()

          if(sku == 'None'){
            return 'none'
          }

          var pack_qty = $(row).children().find('.pack_qty').val();
          var quantity = $(object).val();


          try{
              var input = $(object).parent();
              var input = $(input).parent();
              var row = $(input).parent();

              var pack_qty = $(row).children().find('.pack_qty').val();
              var quantity = $(object).val();

              var pack_qty = Number(pack_qty);
              var quantity = Number(quantity);

              var result = quantity/pack_qty;

              if(Number.isInteger(result) == true && result > 0){
                return 'pass'
          }else{
                return 'fail'
              }
              }catch(error){
                return 'fail'
        }};



    $('#submit_order_setup').click(function(){

        $('#submit_order_setup').not('.hidden').addClass('hidden');
        $('#new_order').find('.loading_button.hidden').removeClass('hidden');

        validateForm(page='new_order').then(result => {
            var input_count = result.length;
            var valid_inputs = [];
            for(i=0;i<input_count;i++){
                var input = result[i];
                if(input == 'pass'){
                    valid_inputs.push(input);
                };
            };

            var valid_count = valid_inputs.length;

            if(input_count != valid_count){
                console.log('error')
                $([document.documentElement, document.body]).animate({scrollTop: 0}, 0);
                $('#submit_order_setup.hidden').removeClass('hidden')
                $('#new_order').find('.loading_button').not('.hidden').addClass('hidden')
                $('#new_order')
            }else{
                submit_po().then(result => {
                    $('#new_order').find(':input').val('')
                    buildPage()
                    viewPage(object=null,page='order',id=result['order_id']);
                }).catch(error => {
                    console.log(error)
                    $('#new_order').find('.error.hidden').removeClass('hidden');
                    $([document.documentElement, document.body]).animate({scrollTop: 0}, 0);
                    $('#submit_order_setup.hidden').removeClass('hidden')
                    $('#new_order').find('.loading_button').not('.hidden').addClass('hidden')

                })
            }

        })
    })


    //SKUs
    function buildSKUs(per_page=5,page=1,supplier_id=null,group_id=null,container_id='skus'){
        load_dashboard_skus(per_page,page,supplier_id=supplier_id,group_id=group_id,container_id=container_id).then(result => {
            return write_skus(data=result['data'],count=result['count'],per_page=result['per_page'],page=result['page'],container_id=result['container_id'])
        }).then(container_id => {
            return edit_table(container_id);
        }).catch(error => {return error.toString()})
    };

    function buildSimpleSKUs(){
        load_simple_skus().then(data => {
            write_simple_skus(data)
        });
    };

    function submit_sku(){
        return new Promise((resolve,reject) => {

            var inputs = $('#new_sku').find(':input').not('button');

            var input_count = $(inputs).length;

            var value_array = [$('#new_sku').find('.section_id').html(),
            $('#new_sku').find('.select_supplier').val(),
            $('#new_sku').find('.foreign_id').val(),
            $('#new_sku').find('.name').val(),
            $('#new_sku').find('.cost').val(),
            $('#new_sku').find('.price').val(),
            $('#new_sku').find('.weight').val(),
            $('#new_sku').find('.unit_x').val(),
            $('#new_sku').find('.unit_y').val(),
            $('#new_sku').find('.unit_z').val(),
            $('#new_sku').find('.pack_qty').val(),
            $('#new_sku').find('.pack_weight').val(),
            $('#new_sku').find('.pack_x').val(),
            $('#new_sku').find('.pack_y').val(),
            $('#new_sku').find('.pack_z').val(),
            ]

            var name_array = ['sku_id','supplier_id','foreign_id','name','cost','price','unit_weight','unit_x','unit_y','unit_z','pack_qty','pack_weight','pack_x','pack_y','pack_z']

            var inputs = [];
            for(i=0;i<value_array.length;i++){
                var value = value_array[i];
                var name = name_array[i];
                var entry = {'id':name,'value':value}
                inputs.push(entry);
            };

            $.ajax({
                type: 'POST',
                url: "{{ url_for('main.post_sku') }}",
                contentType: 'application/json;charset=UTF-8',
                data: JSON.stringify({'inputs':inputs},null,'\t'),
                success: function(sku_id){
                  resolve(sku_id)

                },error: function(error){
                  reject('fail')
                  console.log('post_sku error: '+error)
                }
            })


        })
    };


    function load_simple_skus(){
        return new Promise((resolve,reject) => {
            $.ajax({
                type: 'POST',
                url : "{{ url_for('main.load_simple_skus') }}",
                success: function(result){
                    resolve(result['simple_skus'])
                },
                error: function (error) {
                    reject(error)
                }
            })
        });
    };

    function loadSKU(sku_id){
        return new Promise((resolve,reject) => {
            $.ajax({
                type: 'POST',
                url : "{{ url_for('main.load_sku') }}",
                data: JSON.stringify({'sku_id':sku_id},null,'\t'),
                contentType: 'application/json;charset=UTF-8',
                success: function(result){
                    resolve(result['sku_result'])
                },
                error: function (error) {
                    reject(error)
                }
            })
        })
    };

    function load_dashboard_skus(per_page,page,supplier_id,group_id,container_id){
        return new Promise((resolve,reject) => {
            $.ajax({
                type: 'POST',
                url : "{{ url_for('main.load_dashboard_skus') }}",
                data: JSON.stringify({'per_page':per_page,'page':page,'supplier_id':supplier_id,'group_id':group_id,'container_id':container_id},null,'\t'),
                contentType: 'application/json;charset=UTF-8',
                success: function(result){
                    resolve(result)
                },
                error: function (error) {
                    reject(error)
                }
            })
        });
    };

    function write_simple_skus(data){
        return new Promise((resolve,reject) => {
            var recent_html = []
            if(data<3){
                var length = data.length;
            }else{
                var length = 3;
            }
            for(i=0;i<length;i++){
              var sku = data[i];
              var sku_name = '<td><p id="sku_id_'+sku['sku_id']+'" class="view view_sku">'+sku['SKU']
              var supplier_name = '<td><p id="supplier_id_'+sku['supplier_id']+'" class="view view_supplier">'+sku['Supplier']+'</p></td>';
              var order_count = '<td>'+sku['Order Count']+'</td>';

              var sku_html = [sku_name,supplier_name,order_count];
              //console.log(order_html)
              var sku_html = sku_html.join('');
              //console.log(order_html)
              var sku_html = '<tr>'+sku_html+'</tr>';
              //console.log(order_html)
              recent_html.push(sku_html);
            };
            //console.log(recent_html)
            var recent_html = recent_html.join('');
            //console.log(recent_html)
            $('#simple_skus').find('table').children('tbody').html(recent_html);
        })
    }

    function write_skus(data,count,per_page,page,container_id){
            return new Promise((resolve,reject) => {

            var container = '#'+container_id;

            var columns = ['Action','Order ID','Supplier','Created','MABD','Status'];
            var advanced = ['Subtotal','Tax','Total','SKU Count'];

            var columns_html = '<th>'+columns.join('</th><th>')+'</th>';

            var advanced_html = '<th class="advanced hidden">'+advanced.join('</th><th class="advanced hidden">')+'</th>';

            var head_html = columns_html+advanced_html

            $(container).find('.head').html(head_html);

            var columns = ['Select','Action','SKU ID','SKU','Supplier','Pack Qty','Cost'];
            var advanced = ['Order Count'];

            columns_html = [];
            for(i=0;i<columns.length;i++){
              var column = columns[i]
              if(column == 'Select'){
                var column_html = '<th class="select hidden">'+column+'</th>';
              }else if(column == 'Action'){
                var column_html = '<th class="action">'+column+'</th>';
              }else{
                var column_html = '<th>'+column+'</th>';
              };
              columns_html.push(column_html);
            };


            var advanced_html = '<th class="advanced hidden">'+advanced.join('</th><th class="advanced hidden">')+'</th>';

            var head_html = columns_html+advanced_html
            // console.log(head_html)
            // console.log($(container).find('.head'))
            $(container).find('.head').html(head_html);

            var rows = [];

            var example_asterisk = '<div style="font-weight: bold;">Example</div>'

            for(i=0;i<data.length;i++){
                var row = data[i];

                var values = [];
                var asterisk = ''
                for(j=0;j<columns.length;j++){
                    var column = columns[j];
                    var value = row[column];
                    if(dates.includes(column)){
                      var value_html = '<td>'+displayDate(value)+'</td>'
                    }else if(column == 'Action'){
                      var sku_id = row['sku_id'];
                      var sku_id = 'sku_'+sku_id;
                      var value_html = '<td class="action" id='+sku_id+'><div class="dropdown"><button class="btn btn-default dropdown-toggle show" type="button" data-bs-toggle="dropdown" aria-expanded="true"></button><ul class="dropdown-menu" aria-labelledby="dropdownMenuButton2"><li><a class="dropdown-item edit" style="cursor:pointer;"><span class="reversed-primary-color">Edit </span><i class="fas fa-edit reversed-primary-color "></i></a></li><li><hr class="dropdown-divider"></li><li><a class="dropdown-item delete" style="cursor:pointer;"><span class="reversed-primary-color">Delete </span><i class="fas fa-trash-alt reversed-primary-color "></i></a></li></ul></div></td>';
                    }else if(column == 'Select'){
                      var value_html = '<td class="hidden select"><div class="form-check"><input class="form-check-input select_speedy_sku" type="checkbox" value=""></input></div></td>';
                    }else if(mark_with_asterisk.includes(column)){
                      if(row['Example'] == '1'){
                          var asterisk = example_asterisk
                      }
                      var value_html = '<td>'+value+' '+asterisk+'</td>';
                    }else if(money.includes(column)){
                        var value_html = '<td class="money">'+value+'</td>';
                    }else if(column == 'Supplier'){
                      var id = row['supplier_id'];
                      var id = 'supplier_id_'+id;
                      var value_html = '<td><p id='+id+' class="view view_supplier">'+value+'</p></td>'
                    }else if(column == 'SKU'){
                      var id = row['sku_id'];
                      var id = 'sku_id_'+id;
                      var value_html = '<td><p id='+id+' class="view view_sku">'+value+'</p></td>';
                    }else{
                        var value_html = '<td>'+value+'</td>';
                    };
                    values.push(value_html);
                };

                for(j=0;j<advanced.length;j++){
                    var column = advanced[j];
                    var value = row[column];
                    if(money.includes(column)){
                        var value_html = '<td class="advanced hidden money">'+value+'</td>';
                    }else if(dates.includes(column)){
                        var value_html = '<td class="advanced hidden">'+displayDate(value)+'</td>'
                    }else{
                        var value_html = '<td class="advanced hidden">'+value+'</td>';
                    }

                    values.push(value_html)
                }

                var row_html = '<tr>'+values.join('')+'</tr>';
                rows.push(row_html);

            };

            var body_html = rows.join('');
            // console.log(body_html);
            // console.log($(container).find('.body'))
            $(container).find('.body').html(body_html);

            var pagination_result = pagination(per_page=per_page,page=page,data_length=count);


            //console.log(pagination_result)

            $(container).find('.pages').html(pagination_result['pagination_html']);
            $(container).find('.showing_rows').html(pagination_result['rows_html']);

            if(page==1){
              $(container).find('.prev').addClass('hidden');
            };
            if(per_page > count){
                $(container).find('.next').addClass('hidden');
            };

            resolve(container_id)
    })};

    function loadSKUPage(sku_id){
    return new Promise((resolve,reject) => {
        $.ajax({
            type: 'POST',
            url : "{{ url_for('main.load_sku_page') }}",
            data: JSON.stringify({'sku_id':sku_id},null,'\t'),
            contentType: 'application/json;charset=UTF-8',
            success: function(result){
                resolve(result['sku_result'])
            },
            error: function (error) {
                reject(error)
            }
        })
    })
    };



        function active_skus(supplier_id,sku_id=null,container){
            return new Promise((resolve,reject) => {
                $.ajax({
                    type: 'POST',
                    url : "{{ url_for('main.active_skus') }}",
                    contentType: 'application/json;charset=UTF-8',
                    data: JSON.stringify({'supplier_id':supplier_id,'sku_id':sku_id},null,'\t'),
                    success: function(result){
                        var data = result['result']
                        var sku_html = [];
                        if(data.length > 0){
                          var html = '<option value="None" selected>Select SKU</option>';
                          sku_html.push(html);
                        }
                        for(i=0;i<data.length;i++){
                            var sku = data[i];
                            var html = '<option value="'+sku['sku_id'].toString()+'">'+sku['name']+'</option>';
                            sku_html.push(html);
                        };
                        var sku_html = sku_html.join();

                        $(container).find('.select_sku').html(sku_html)

                       resolve(data)


                    },
                    error: function (error) {
                        reject(error)
                    }
                })
            });
        };


    $('#simple_skus').on('click','.add',function(){
        viewPage(object=null,page='new_sku',id=null)
    });

    $('#sku').on('click','.edit',function(){
        var sku_id = $('#sku').find('.section_id').html();

        viewPage(object=null,page='new_sku',id=sku_id)
    });

    $('#new_sku').on('click','.submit',function(){
        $('#new_sku').find('.submit').addClass('hidden');
        $('#new_sku').find('.loading_button').removeClass('hidden');

         validateForm(page='new_sku').then(result => {
            var input_count = result.length;
            var valid_inputs = [];
            for(i=0;i<input_count;i++){
                var input = result[i];
                if(input == 'pass'){
                    valid_inputs.push(input);
                };
            };

            var valid_count = valid_inputs.length;

            if(input_count != valid_count){
                console.log('error')
                $([document.documentElement, document.body]).animate({scrollTop: 0}, 0);
                $('#new_sku').find('.submit').removeClass('hidden');
                $('#new_sku').find('.loading_button').addClass('hidden');
            }else{
                submit_sku().then(sku_id => {
                    $('#new_sku').find(':input').val('')
                    $('#new_sku').find('.section_id').html('')
                    $('#new_sku').find('.submit').removeClass('hidden');
                    $('#new_sku').find('.loading_button').addClass('hidden');
                    $('#new_sku').find('.error').not('.hidden').addClass('hidden');
                    buildPage()
                    viewPage(object=null,page='sku',id=sku_id);
                }).catch(error => {
                    console.log(error)
                    $('#new_sku').find('.error.hidden').removeClass('hidden');
                    $([document.documentElement, document.body]).animate({scrollTop: 0}, 0);
                    $('#new_sku').find('.submit').removeClass('hidden');
                    $('#new_sku').find('.loading_button').addClass('hidden');

                })
            }

        })
    })


    //suppliers
    function buildSuppliers(per_page=5,page=1,container_id='suppliers'){
        load_dashboard_suppliers(per_page=per_page,page=page,container_id=container_id).then(result => {
        return write_suppliers(data=result['data'],count=result['count'],per_page=result['per_page'],page=result['page'],container_id=result['container_id'])
        }).then(result => {
            return edit_table(container_id);
        }).catch(error => {return error.toString()})
    };

    function buildSimpleSuppliers(){
        load_simple_suppliers().then(data => {
            write_simple_suppliers(data)
        });
    };

    function load_simple_suppliers(){
        return new Promise((resolve,reject) => {
            $.ajax({
                type: 'POST',
                url : "{{ url_for('main.load_simple_suppliers') }}",
                success: function(result){
                    resolve(result['simple_suppliers'])
                },
                error: function (error) {
                    reject(error)
                }
            })
        });
    };


    function load_dashboard_suppliers(per_page,page,container_id){
        return new Promise((resolve,reject) => {
            $.ajax({
                type: 'POST',
                url : "{{ url_for('main.load_dashboard_suppliers') }}",
                data: JSON.stringify({'per_page':per_page,'page':page,'container_id':container_id},null,'\t'),
                contentType: 'application/json;charset=UTF-8',
                success: function(result){
                    resolve(result)
                },
                error: function (error) {
                    reject(error)
                }
            })
        });
    };

    function submit_supplier(){
        return new Promise((resolve,reject) => {

            var inputs = $('#new_supplier').find(':input').not('button');

            var input_count = $(inputs).length;

            var value_array = [$('#new_supplier').find('.section_id').html(),
            $('#new_supplier').find('.name').val(),
            $('#new_supplier').find('.foreign_id').val(),
            $('#new_supplier').find('.email').val(),
            $('#new_supplier').find('.phone').val(),
            $('#new_supplier').find('.street').val(),
            $('#new_supplier').find('.city').val(),
            $('#new_supplier').find('.zip').val(),
            $('#new_supplier').find('.country').val(),
            $('#new_supplier').find('.state').val(),
            ]

            var name_array = ['supplier_id','name','foreign_id','email','phone','street','city','zip','country','state']

            var inputs = [];
            for(i=0;i<value_array.length;i++){
                var value = value_array[i];
                var name = name_array[i];
                var entry = {'id':name,'value':value}
                inputs.push(entry);
            };

            $.ajax({
                type: 'POST',
                url: "{{ url_for('main.post_supplier') }}",
                contentType: 'application/json;charset=UTF-8',
                data: JSON.stringify({'inputs':inputs},null,'\t'),
                success: function(result){
                  resolve(result)

                },error: function(error){
                  reject('fail')
                  console.log('post_sku error: '+error)
                }
            })


        })
    };

    $('#simple_suppliers').on('click','.add',function(){
        viewPage(object=null,page='new_supplier',id=null)
    });

    $('#supplier').on('click','.edit',function(){
        var supplier_id = $('#supplier').find('.section_id').html();

        viewPage(object=null,page='new_supplier',id=supplier_id)
    });

    $('#new_supplier').on('click','.submit',function(){
        $('#new_supplier').find('.submit').addClass('hidden');
        $('#new_supplier').find('.loading_button').removeClass('hidden');

         validateForm(page='new_supplier').then(result => {
            var input_count = result.length;
            var valid_inputs = [];
            for(i=0;i<input_count;i++){
                var input = result[i];
                if(input == 'pass'){
                    valid_inputs.push(input);
                };
            };

            var valid_count = valid_inputs.length;

            if(input_count != valid_count){
                console.log('error')
                $([document.documentElement, document.body]).animate({scrollTop: 0}, 0);
                $('#new_supplier').find('.error').removeClass('hidden');
                $('#new_supplier').find('.submit').removeClass('hidden');
                $('#new_supplier').find('.loading_button').addClass('hidden');
            }else{
                submit_supplier().then(supplier_id => {
                    $('#new_supplier').find(':input').val('')
                    $('#new_supplier').find('.section_id').html('')
                    $('#new_supplier').find('.loading_button').addClass('hidden');
                    $('#new_supplier').find('.is-valid').removeClass('.is-valid');
                    $('#new_supplier').find('.is-invalid').removeClass('is-invalid')

                    buildPage()
                    viewPage(object=null,page='supplier',id=supplier_id);
                }).catch(error => {
                    console.log(error)
                    $('#new_supplier').find('.error.hidden').removeClass('hidden');
                    $([document.documentElement, document.body]).animate({scrollTop: 0}, 0);
                    $('#new_supplier').find('.submit').removeClass('hidden');
                    $('#new_supplier').find('.loading_button').addClass('hidden');
                })
            }

        })
    })

    function write_simple_suppliers(data){
        return new Promise((resolve,reject) => {
            var recent_html = []
            if(data<3){
                var length = data.length;
            }else{
                var length = 3;
            }

            for(i=0;i<length;i++){
              var supplier = data[i];
              var supplier_name = '<td><p id="supplier_id_'+supplier['supplier_id']+'" class="view view_supplier">'+supplier['Supplier']+'</p></td>';
              var order_count = '<td>'+supplier['Order Count']+'</td>';
              var sku_count = '<td>'+supplier['SKU Count']+'</td>';
              var supplier_html = [supplier_name,order_count,sku_count];
              //console.log(order_html)
              var supplier_html = supplier_html.join('');
              //console.log(order_html)
              var supplier_html = '<tr>'+supplier_html+'</tr>';
              //console.log(order_html)
              recent_html.push(supplier_html);
            };
            //console.log(recent_html)
            var recent_html = recent_html.join('');
            //console.log(recent_html)
            $('#simple_suppliers').find('table').children('tbody').html(recent_html);
        })
    }

    function write_suppliers(data,count,per_page,page,container_id){
        return new Promise((resolve,reject) => {

          var container = '#'+container_id;

          var columns = ['Action','Supplier ID','Supplier','Email'];
          var advanced = ['SKU Count','Order Count'];

          var columns_html = '<th>'+columns.join('</th><th>')+'</th>';

          var advanced_html = '<th class="advanced hidden">'+advanced.join('</th><th class="advanced hidden">')+'</th>';

          var head_html = columns_html+advanced_html

          $(container).find('.head').html(head_html);

          var rows = [];

          var example_asterisk = '<div style="font-weight: bold;">Example</div>'

          for(i=0;i<data.length;i++){
              var row = data[i];
              var values = [];
              var asterisk = ''
              for(j=0;j<columns.length;j++){
                  var column = columns[j];
                  var value = row[column];
                  if(dates.includes(column)){
                      var value_html = '<td>'+displayDate(value)+'</td>'
                  }else if(mark_with_asterisk.includes(column)){
                      var is_example_sku = row['Example']
                      if(is_example_sku == '1'){
                          var asterisk = example_asterisk
                      }
                      var value_html = '<td>'+value+' '+asterisk+'</td>';
                  }else if(money.includes(column)){
                    var value_html = '<td class="money">'+value+'</td>';
                  }else if(column == 'Action'){
                    var supplier_id = row['supplier_id'];
                    var supplier_id = 'supplier_'+supplier_id;
                    var value_html = '<td class="action" id='+supplier_id+'><div class="dropdown"><button class="btn btn-default dropdown-toggle show" type="button" data-bs-toggle="dropdown" aria-expanded="true"></button><ul class="dropdown-menu" aria-labelledby="dropdownMenuButton2"><li><a class="dropdown-item edit" style="cursor:pointer;"><span class="reversed-primary-color">Edit </span><i class="fas fa-edit reversed-primary-color "></i></a></li><li><hr class="dropdown-divider"></li><li><a class="dropdown-item delete" style="cursor:pointer;"><span class="reversed-primary-color">Delete </span><i class="fas fa-trash-alt reversed-primary-color "></i></a></li></ul></div></td>';
                  }else if(column == 'Supplier'){
                    var id = row['supplier_id'];
                    var id = 'supplier_id_'+id;
                    var value_html = '<td><p id='+id+' class="view view_supplier">'+value+'</p></td>'
                  }else{
                      var value_html = '<td>'+value+'</td>';
                  };
                  values.push(value_html);
              };

              for(j=0;j<advanced.length;j++){
                  var column = advanced[j];
                  var value = row[column];
                  if(money.includes(column)){
                      var value_html = '<td class="advanced hidden money">'+value+'</td>';
                  }else if(dates.includes(column)){
                      var value_html = '<td class="advanced hidden">'+displayDate(value)+'</td>'
                  }else{
                      var value_html = '<td class="advanced hidden">'+value+'</td>';
                  }

                  values.push(value_html)
              }

              var row_html = '<tr>'+values.join('')+'</tr>';
              rows.push(row_html);

          };

          var body_html = rows.join('');
          $(container).find('.body').html(body_html);


          var pagination_result = pagination(per_page=per_page,page=page,data_length=count);

          //console.log(pagination_result)

          $(container).find('.pages').html(pagination_result['pagination_html']);
          $(container).find('.showing_rows').html(pagination_result['rows_html']);

          if(page==1){
              $(container).find('.prev').addClass('hidden');
          };

          if(per_page > count){
            $(container).find('.next').addClass('hidden');
          }
          // var page = $('#order ')
          // pagination(per_page=,page,data_length)
          resolve(container_id)


        })
        };

        function loadSupplierPage(supplier_id){
            return new Promise((resolve,reject) => {
                $.ajax({
                    type: 'POST',
                    url : "{{ url_for('main.load_supplier_page') }}",
                    data: JSON.stringify({'supplier_id':supplier_id},null,'\t'),
                    contentType: 'application/json;charset=UTF-8',
                    success: function(result){
                        resolve(result['supplier_result'])
                    },
                    error: function (error) {
                        reject(error)
                    }
                })
            })
        };

        function loadSupplier(supplier_id){
            return new Promise((resolve,reject) => {
                $.ajax({
                    type: 'POST',
                    url : "{{ url_for('main.load_supplier') }}",
                    data: JSON.stringify({'supplier_id':supplier_id},null,'\t'),
                    contentType: 'application/json;charset=UTF-8',
                    success: function(result){
                        resolve(result['supplier_result'])
                    },
                    error: function (error) {
                        reject(error)
                    }
                })
            })
        };


        function active_suppliers(supplier_id=null,container_id){
            return new Promise((resolve,reject) => {
                    $.ajax({
                        type: 'POST',
                        url : "{{ url_for('main.active_suppliers') }}",
                        data: JSON.stringify({'supplier_id':supplier_id},null,'\t'),
                        contentType: 'application/json;charset=UTF-8',
                        success: function(result){
                            var data = result['result']

                            var supplier_html = [];
                            if(data.length > 1){
                              var html = '<option value="None" selected>Select supplier</option>';
                              supplier_html.push(html);
                            }
                            for(i=0;i<data.length;i++){
                                var supplier = data[i];
                                var html = '<option value="'+supplier['supplier_id'].toString()+'">'+supplier['Supplier Name']+'</option>';

                                supplier_html.push(html);
                            };
                            var supplier_html = supplier_html.join();
                            $('#'+container_id).find('.select_supplier').html(supplier_html)
                            resolve(data)
                            }
                            ,
                        error: function (error) {
                            reject(error)
                        }
                    })
                });
        };


    //company
    function buildCompany(){
        load_dashboard_company().then(data => {
            return write_company(data)
    })
    };

    function load_dashboard_company(){
        return new Promise((resolve,reject) => {
            $.ajax({
                type: 'POST',
                url : "{{ url_for('main.load_dashboard_company') }}",
                contentType: 'application/json;charset=UTF-8',
                success: function(result){
                    resolve(result)
                },
                error: function (error) {
                    reject(error)
                }
            })
        });
    };

    function write_company(data){
        return new Promise((resolve,reject) => {

            if(data != undefined){
                $('#simple_company').find('.name').html(data['name']);

                var inputs = $('#company').find('.company_info').find(':input');

                var input_1 = $('#company').find('.company_info').find('.name');

                $('#company').find('.company_info').find('.name').val(data['name'])



                var values = [data['name'],data['email'],data['street'],data['city'],data['zip'],data['state'],data['country']]


                for(i=0;i<inputs.length;i++){
                    var input = inputs.eq(i)
                    var value = values[i];
                    $(input).val(value)
                };


                if(data['extension'] != 'None'){
                    var path = '/static/uploads/'+data['image_name']+data['extension'];
                    var image_html = "<img class='img-fluid'  src='"+path+"'>";
                    $('#company').find('.logo').html(image_html);
                    $('#simple_company').find('.logo').html(image_html);
                };
            };

        })
    };

    function confirmExistingCompany(){
        return new Promise((resolve,reject) => {
            $.ajax({
                type: 'POST',
                url : "{{ url_for('main.confirm_existing_company') }}",
                contentType: 'application/json;charset=UTF-8',
                success: function(result){
                    resolve(result)
                },
                error: function (error) {
                    reject(error)
                }
            })


        })
    };

    function active_company(container_id){
        return new Promise((resolve,reject) => {
                $.ajax({
                    type: 'POST',
                    url : "{{ url_for('main.active_company') }}",
                    contentType: 'application/json;charset=UTF-8',
                    success: function(result){

                        var result = result['result'][0];

                        var address = [result['street'],result['city'],result['state'],result['zip']];

                        var address = address.join(', ')


                        if(address.length > 0){
                            $('#'+container_id).find('.company_address').html(address)
                            resolve(container_id)
                        }else{
                            reject('no company')
                        }

                    },
                    error: function (error) {
                        reject(error)
                    }
                })
            });
    };

    $('#company').on('click','.recipients',function(){
        viewPage(object=null,page='recipients',id=null)
    });

    $('#company').on('click','.edit',function(){
        $('#company').find('form.company_info').find(':input').prop('disabled',false);
        $('#company').find('.edit').addClass('hidden');
        $('#company').find('.change_logo').removeClass('hidden');
        $('#company').find('.submit.hidden').removeClass('hidden');
        $('#company').find('.cancel_edit.hidden').removeClass('hidden');
    })

    $('#company').on('click','.cancel_edit',function(){
        $('#company').find('.edit.hidden').removeClass('hidden');
        $('#company').find('.change_logo').addClass('hidden');
        $('#company').find('.submit').addClass('hidden');
        $('#company').find('.cancel_edit').addClass('hidden');
    })

    function submit_company(company_id=null){
        return new Promise((resolve,reject) => {
            var page_id = '#company'

            var inputs = $(page_id).find(':input').not('button');
            var input_count = $(inputs).length;

            var value_array = [company_id,
            $(page_id).find('.name').val(),
            $(page_id).find('.email').val(),
            $(page_id).find('.street').val(),
            $(page_id).find('.city').val(),
            $(page_id).find('.zip').val(),
            $(page_id).find('.state').val(),
            $(page_id).find('.country').val(),
            ];

            var name_array = ['company_id','name','email','street','city','zip','state','country'];

            var inputs = [];
            for(i=0;i<value_array.length;i++){
                var value = value_array[i];
                var name = name_array[i];
                var entry = {'id':name,'value':value}
                inputs.push(entry);
            };

            $.ajax({
                type: 'POST',
                url: "{{ url_for('main.post_company') }}",
                contentType: 'application/json;charset=UTF-8',
                data: JSON.stringify({'inputs':inputs},null,'\t'),
                success: function(company_id){
                  resolve(company_id)

                },error: function(error){
                  reject('fail')
                  console.log('post_sku error: '+error)
                }
            })
        })
    }

    function edit_logo(company_id,file_id){
          return new Promise((resolve,reject) => {

            var file_select = document.getElementById((file_id));

            var files = file_select.files;

            if(files.length == 0){
              resolve('no image')
            }else{
              var file = files[0];

              var form_data = new FormData();
              form_data.append('file',file)

              var url = "{{ url_for('main.upload_logo') }}"+'/'+company_id.toString();

              $.ajax({
                type: 'POST',
                url : url,
                data: form_data,
                contentType: false,
                cache: false,
                processData: false,
                success: function(image_id){
                    resolve(image_id)
                  },error: function(error){
                    reject('fail')
                  }
              });
            }





          })
        };


    $('#company').on('click','.submit',function(){
        validateForm(page='company').then(result => {
            console.log(result)
            var input_count = result.length;
            var valid_inputs = [];
            for(i=0;i<input_count;i++){
                var input = result[i];
                if(input == 'pass'){
                    valid_inputs.push(input);
                };
            };

            var valid_count = valid_inputs.length;

            if(input_count != valid_count){
                console.log('error')
                $([document.documentElement, document.body]).animate({scrollTop: 0}, 0);
                $('#company').find('.submit').removeClass('hidden');
                $('#company').find('.loading_button').addClass('hidden');
            }else{
                load_dashboard_company().then(result => {
                    console.log(result)
                    edit_logo(company_id=result['company_id'],file_id='company_logo')
                    return submit_company(company_id=result['company_id'])
                }).then(company_id => {
                    console.log(company_id)
                    buildPage()
                    viewPage(object=null,page='company',id=null);
                    $([document.documentElement, document.body]).animate({scrollTop: 0}, 0);
                }).catch(error => {
                    console.log(error)
                    $([document.documentElement, document.body]).animate({scrollTop: 0}, 0);
                    $('#company').find('.edit.hidden').removeClass('hidden');
                    $('#company').find('.change_logo').addClass('hidden');
                    $('#company').find('.submit').addClass('hidden');
                    $('#company').find('.cancel_edit').addClass('hidden');
                    $('#company').find('.error.hidden').removeClass('hidden');
                    $('#company').find('.submit').removeClass('hidden');
                    $('#company').find('.loading_button').addClass('hidden');

                })
            }

        })
    })


    //recipients
    $('#recipients').on('click','.edit',function(){
        var recipient_id = $(this).parentsUntil('.accordion','.accordion-item').attr('id').split('_')[2];
        viewPage(object=null,page='new_recipient',id=recipient_id)
    });


    function buildRecipient(){
        load_dashboard_recipients().then(result => {
            var data = result['recipient_result']
            return write_recipients(data)
        })
    }

    function load_recipient(recipient_id){
        return new Promise((resolve,reject) => {
            $.ajax({
                type: 'POST',
                url : "{{ url_for('main.load_recipient') }}",
                data: JSON.stringify({'recipient_id':recipient_id},null,'\t'),
                contentType: 'application/json;charset=UTF-8',
                success: function(result){
                    resolve(result['recipient_result'])
                },
                error: function (error) {
                    reject(error)
                }
            })
        });
    };

    $('#new_recipient').on('click','.submit',function(){
        var page_id = '#new_recipient';
        $(page_id).find('.submit').addClass('hidden');
        $(page_id).find('.loading_button').removeClass('hidden');

         validateForm(page='new_recipient').then(result => {
            var input_count = result.length;
            var valid_inputs = [];
            for(i=0;i<input_count;i++){
                var input = result[i];
                if(input == 'pass'){
                    valid_inputs.push(input);
                };
            };

            var valid_count = valid_inputs.length;

            if(input_count != valid_count){
                console.log('error')
                $([document.documentElement, document.body]).animate({scrollTop: 0}, 0);
                $(page_id).find('.error').removeClass('hidden');
                $(page_id).find('.submit').removeClass('hidden');
                $(page_id).find('.loading_button').addClass('hidden');
            }else{
                submit_recipient().then(supplier_id => {
                    $(page_id).find(':input').val('')
                    $(page_id).find('.section_id').html('')
                    $(page_id).find('.loading_button').addClass('hidden');
                    $(page_id).find('.is-valid').removeClass('.is-valid');
                    $(page_id).find('.is-invalid').removeClass('is-invalid')
                    buildPage()
                    viewPage(object=null,page='recipients',id=null);
                }).catch(error => {
                    console.log(error)
                    $(page_id).find('.error.hidden').removeClass('hidden');
                    $([document.documentElement, document.body]).animate({scrollTop: 0}, 0);
                    $(page_id).find('.submit').removeClass('hidden');
                    $(page_id).find('.loading_button').addClass('hidden');
                })
            }

        })
    })


    function submit_recipient(){
        return new Promise((resolve,reject) => {

            var page_id = '#new_recipient';

            var inputs = $(page_id).find(':input').not('button');

            var input_count = $(inputs).length;

            var value_array = [$(page_id).find('.section_id').html(),
            $(page_id).find('.name').val(),
            $(page_id).find('.phone').val(),
            $(page_id).find('.street').val(),
            $(page_id).find('.city').val(),
            $(page_id).find('.zip').val(),
            $(page_id).find('.country').val(),
            $(page_id).find('.state').val()
            ]

            var name_array = ['recipient_id','name','phone','street','city','zip','country','state']

            var inputs = [];
            for(i=0;i<value_array.length;i++){
                var value = value_array[i];
                var name = name_array[i];
                var entry = {'id':name,'value':value}
                inputs.push(entry);
            };

            $.ajax({
                type: 'POST',
                url: "{{ url_for('main.post_recipient') }}",
                contentType: 'application/json;charset=UTF-8',
                data: JSON.stringify({'inputs':inputs},null,'\t'),
                success: function(result){
                  resolve(result)

                },error: function(error){
                  reject('fail')
                  console.log('post_sku error: '+error)
                }
            })


        })
    };

    function load_dashboard_recipients(){
        return new Promise((resolve,reject) => {
            $.ajax({
                type: 'POST',
                url : "{{ url_for('main.load_dashboard_recipients') }}",
                contentType: 'application/json;charset=UTF-8',
                success: function(result){
                    resolve(result)
                },
                error: function (error) {
                    reject(error)
                }
            })
        });
    };

    function write_recipients(data){
        return new Promise((resolve,reject) => {

            var address_count = data.length;

            var addresses = [];
            for(i=0;i<address_count;i++){
                var address = data[i];

                var number = i+1;

                if(number == 1){
                    var accordion_item_html = "<div class='accordion-item' id='recipient_id_"+address['recipient_id']+"'><h2 class='accordion-header' id='address_"+number+"'><button class='accordion-button show type='button' data-bs-toggle='collapse' data-bs-target='#collapse_"+number+"' aria-expanded='true' aria-controls='collapse_"+number+"'>Address "+number+"</button></h2><div id='collapse_"+number+"' class='accordion-collapse show' aria-labelledby='heading_"+number+"' data-bs-parent='#address_accordion'><div class='accordion-body'><div class='d-flex flex-row justify-content-end'><div class='p-3 edit' style='cursor:pointer;'><p class='fs-5 fw-bold'>Edit</p><p><i class='fas fa-edit'></i></p></div><div class='p-3 delete' style='cursor:pointer;'><p class='fs-5 fw-bold'>Delete</p><p><i class='fas fa-trash-alt'></i></p></div></div><p class='fs-5 fw-bold fst-italic'><span class='name'>"+address['name']+"</span><br><span class='address'>"+address['street']+"</span><br><span class='city'>"+address['city']+"</span>, <span class='state'>"+address['state']+"</span>, <span class='zip'>"+address['zip']+"</span><br><span class='country'>"+address['country']+"</span><span class='hidden recipient_id'>"+address['recipient_id']+"</span></p></div></div></div>";

                }else{
                    var accordion_item_html = "<div class='accordion-item' id='recipient_id_"+address['recipient_id']+"'><h2 class='accordion-header' id='address_"+number+"'><button class='accordion-button collapsed type='button' data-bs-toggle='collapse' data-bs-target='#collapse_"+number+"' aria-expanded='true' aria-controls='collapse_"+number+"'>Address "+number+"</button></h2><div id='collapse_"+number+"' class='accordion-collapse collapse' aria-labelledby='heading_"+number+"' data-bs-parent='#address_accordion'><div class='accordion-body'><div class='d-flex flex-row justify-content-end'><div class='p-3 edit' style='cursor:pointer;'><p class='fs-5 fw-bold'>Edit</p><p><i class='fas fa-edit'></i></p></div><div class='p-3 delete' style='cursor:pointer;'><p class='fs-5 fw-bold'>Delete</p><p><i class='fas fa-trash-alt'></i></p></div></div><p class='fs-5 fw-bold fst-italic'><span class='name'>"+address['name']+"</span><br><span class='address'>"+address['street']+"</span><br><span class='city'>"+address['city']+"</span>, <span class='state'>"+address['state']+"</span>, <span class='zip'>"+address['zip']+"</span><br><span class='country'>"+address['country']+"</span><span class='hidden recipient_id'>"+address['recipient_id']+"</span></p></div></div></div>";

                }

                addresses.push(accordion_item_html);
            };

            var accordion_html = addresses.join('')
            $('#address_accordion').html(accordion_html)

            resolve('Great success')

        })
    }

    function active_recipients(container_id){
        return new Promise((resolve,reject) => {
                $.ajax({
                    type: 'POST',
                    url : "{{ url_for('main.active_recipients') }}",
                    contentType: 'application/json;charset=UTF-8',
                    success: function(result){
                        var data = result['result']
                        var recipient_html = [];
                        var html = '<option value="None" selected>Select address</option>';
                        recipient_html.push(html);
                        for(i=0;i<data.length;i++){
                            var recipient = data[i];
                            var html = '<option value="'+recipient['recipient_id'].toString()+'">'+recipient['name']+' -- '+recipient['street']+' -- '+recipient['city']+'</option>';

                            recipient_html.push(html);
                        };
                        var recipient_html = recipient_html.join();
                        $('#'+container_id).find('.select_recipient').html(recipient_html)
                        resolve(data)
                    },
                    error: function (error) {
                        reject(error)
                    }
                })
            });
    };

    //groups
    function buildGroups(){
        load_dashboard_groups().then(result => {
            var data = result['group_result']
            return write_groups(data)
        })
    };

    function buildSimpleGroups(){
        load_simple_groups().then(data => {
            write_simple_groups(data)
        })
    };



    function load_simple_groups(){
        return new Promise((resolve,reject) => {
            $.ajax({
                type: 'POST',
                url : "{{ url_for('main.load_simple_groups') }}",
                success: function(result){
                    resolve(result['simple_groups'])
                },
                error: function (error) {
                    reject(error)
                }
            })
        });
    };

    function write_simple_groups(data){
        return new Promise((resolve,reject) => {
             var simple_groups_html = [];
             for(i=0;i<4;i++){
                  var group = data[i];
                  var html = "<div class='p-3 col-12 col-lg-6'><button id='group_id_"+group['sku_group_id']+"' class='group p-3 simple-button flip btn btn-lg w-100 view view_group d-flex justify-content-center' type='button' style='border-style:solid;'>"+group['name']+"</button></div>";
                  simple_groups_html.push(html)
                };
            var simple_groups_html = simple_groups_html.join('')
            $('#simple_groups').find('.list_groups').html(simple_groups_html)

        })
    }

    function write_groups(data){
      return new Promise((resolve,reject) => {
        var speedy_groups_html = [];

        for(i=0;i<data.length;i++){
          var group = data[i];
          var html = "<div class='col-12 col-sm-4 p-3'><button id='group_id_"+group['sku_group_id']+"' class='group p-3 simple-button btn btn-lg w-100 view view_group' type='button' style='border-style:solid;'>"+group['name']+"</button></div>";
          speedy_groups_html.push(html)
        };

        var action_html = "<div class='p-3 col-6 col-sm-4'><button class='p-3 simple-button btn btn-lg view view_new_group w-100'  type='button'><p class='m-0'>New Group <i class='far fa-plus-square'></i></p></button></div>";
        speedy_groups_html.push(action_html);

        var speedy_groups_html = speedy_groups_html.join('')

        $('#speedy_groups_list').html(speedy_groups_html)
        $('#speedy_groups_count').html('Showing '+data.length+' groups')
        resolve('Great success')
      })
    };

    function load_dashboard_groups(){
        return new Promise((resolve,reject) => {
            $.ajax({
                type: 'POST',
                url : "{{ url_for('main.load_dashboard_groups') }}",
                contentType: 'application/json;charset=UTF-8',
                success: function(result){
                    resolve(result)
                },
                error: function (error) {
                    reject(error)
                }
            })
        });
    }

    function loadGroupPage(group_id){
        return new Promise((resolve,reject) => {
            $.ajax({
                type: 'POST',
                url : "{{ url_for('main.load_group') }}",
                data: JSON.stringify({'group_id':group_id},null,'\t'),
                contentType: 'application/json;charset=UTF-8',
                success: function(result){

                    resolve(result)
                },
                error: function (error) {
                    reject(error)
                }
            })
        })
    };

    function loadGroupSKUs(group_id){
        return new Promise((resolve,reject) => {
            $.ajax({
                type: 'POST',
                url : "{{ url_for('main.load_group_skus') }}",
                data: JSON.stringify({'group_id':group_id},null,'\t'),
                contentType: 'application/json;charset=UTF-8',
                success: function(result){
                    resolve(result['skus'])
                },
                error: function (error) {
                    reject(error)
                }
            })
        })
    };


    function write_skus(data,count,per_page,page,container_id){
            return new Promise((resolve,reject) => {

            var container = '#'+container_id;

            var columns = ['Action','Order ID','Supplier','Created','MABD','Status'];
            var advanced = ['Subtotal','Tax','Total','SKU Count'];

            var columns_html = '<th>'+columns.join('</th><th>')+'</th>';

            var advanced_html = '<th class="advanced hidden">'+advanced.join('</th><th class="advanced hidden">')+'</th>';

            var head_html = columns_html+advanced_html

            $(container).find('.head').html(head_html);

            var columns = ['Select','Action','SKU ID','SKU','Supplier','Pack Qty','Cost'];
            var advanced = ['Order Count'];

            columns_html = [];
            for(i=0;i<columns.length;i++){
              var column = columns[i]
              if(column == 'Select'){
                var column_html = '<th class="select hidden">'+column+'</th>';
              }else if(column == 'Action'){
                var column_html = '<th class="action">'+column+'</th>';
              }else{
                var column_html = '<th>'+column+'</th>';
              };
              columns_html.push(column_html);
            };


            var advanced_html = '<th class="advanced hidden">'+advanced.join('</th><th class="advanced hidden">')+'</th>';

            var head_html = columns_html+advanced_html
            // console.log(head_html)
            // console.log($(container).find('.head'))
            $(container).find('.head').html(head_html);

            var rows = [];

            var example_asterisk = '<div style="font-weight: bold;">Example</div>'

            for(i=0;i<data.length;i++){
                var row = data[i];

                var values = [];
                var asterisk = ''
                for(j=0;j<columns.length;j++){
                    var column = columns[j];
                    var value = row[column];
                    if(dates.includes(column)){
                      var value_html = '<td>'+displayDate(value)+'</td>'
                    }else if(column == 'Action'){
                      var sku_id = row['sku_id'];
                      var sku_id = 'sku_'+sku_id;
                      var value_html = '<td class="action" id='+sku_id+'><div class="dropdown"><button class="btn btn-default dropdown-toggle show" type="button" data-bs-toggle="dropdown" aria-expanded="true"></button><ul class="dropdown-menu" aria-labelledby="dropdownMenuButton2"><li><a class="dropdown-item edit" style="cursor:pointer;"><span class="reversed-primary-color">Edit </span><i class="fas fa-edit reversed-primary-color "></i></a></li><li><hr class="dropdown-divider"></li><li><a class="dropdown-item delete" style="cursor:pointer;"><span class="reversed-primary-color">Delete </span><i class="fas fa-trash-alt reversed-primary-color "></i></a></li></ul></div></td>';
                    }else if(column == 'Select'){
                      var value_html = '<td class="hidden select"><div class="form-check"><input class="form-check-input select_speedy_sku" type="checkbox" value=""></input></div></td>';
                    }else if(mark_with_asterisk.includes(column)){
                      if(row['Example'] == '1'){
                          var asterisk = example_asterisk
                      }
                      var value_html = '<td>'+value+' '+asterisk+'</td>';
                    }else if(money.includes(column)){
                        var value_html = '<td class="money">'+value+'</td>';
                    }else if(column == 'Supplier'){
                      var id = row['supplier_id'];
                      var id = 'supplier_id_'+id;
                      var value_html = '<td><p id='+id+' class="view view_supplier">'+value+'</p></td>'
                    }else if(column == 'SKU'){
                      var id = row['sku_id'];
                      var id = 'sku_id_'+id;
                      var value_html = '<td><p id='+id+' class="view view_sku">'+value+'</p></td>';
                    }else{
                        var value_html = '<td>'+value+'</td>';
                    };
                    values.push(value_html);
                };

                for(j=0;j<advanced.length;j++){
                    var column = advanced[j];
                    var value = row[column];
                    if(money.includes(column)){
                        var value_html = '<td class="advanced hidden money">'+value+'</td>';
                    }else if(dates.includes(column)){
                        var value_html = '<td class="advanced hidden">'+displayDate(value)+'</td>'
                    }else{
                        var value_html = '<td class="advanced hidden">'+value+'</td>';
                    }

                    values.push(value_html)
                }

                var row_html = '<tr>'+values.join('')+'</tr>';
                rows.push(row_html);

            };

            var body_html = rows.join('');
            // console.log(body_html);
            // console.log($(container).find('.body'))
            $(container).find('.body').html(body_html);

            var pagination_result = pagination(per_page=per_page,page=page,data_length=count);


            //console.log(pagination_result)

            $(container).find('.pages').html(pagination_result['pagination_html']);
            $(container).find('.showing_rows').html(pagination_result['rows_html']);

            if(page==1){
              $(container).find('.prev').addClass('hidden');
            };
            if(per_page > count){
                $(container).find('.next').addClass('hidden');
            };

            resolve(container_id)
    })};


    function new_group_fill_suppliers(skus){
        return new Promise((resolve,reject) => {
            var supplier_ids = [];
            for(i=0;i<skus.length;i++){
                var sku = skus[i]
                supplier_ids.push(sku['supplier_id'])
                var row = $('#new_group').find('tbody').find('tr').eq(i);
                $(row).find('.select_supplier').val(sku['supplier_id']);
            };
            resolve(supplier_ids)
        })
    }

    function new_group_fill_skus(supplier_ids){
        return new Promise((resolve,reject) => {
            var supplier_ids = [];
            var containers = [];
            var result = [];
            for(i=0;i<supplier_ids.length;i++){
                var supplier_id = supplier_ids[i];
                var container = $(page_id).find('tbody').find('tr').eq(i);
                supplier_ids.push(supplier_id)
                containers.push(container)
                result.push(active_skus(supplier_id=supplier_id,sku_id=null,container=container))
            }
            resolve(result)
        })
    }




    $('#simple_groups').on('click','.add',function(){
        viewPage(object=null,page='new_group',id=null)
        $('#new_group').find('tr:not(:first)').remove();
    });

    $('#group').on('click','.edit',function(){
        var supplier_id = $('#group').find('.section_id').html();
        viewPage(object=null,page='new_group',id=group_id)
    });


    function new_group_add_sku(count=1,skus=null){
        return new Promise((resolve,reject) => {
            if(count > 0){
                for(i=0;i<count;i++){
                    var clone = $('#new_group').find('.table').find('tr').first().clone();
                    var sku_count = $('#new_group').find('.table').find('tr').length;
                    $(clone).find('.number').html(sku_count+1);
                    $('#new_group').find('.table').append(clone);
                }
                resolve(skus)
            }else if(count < 0){
                $('#new_group').find('tbody').find('tr').slice(count).remove();
                console.log('test?')
                resolve(skus)
            }

        })
    }





    $('#new_group').on('click','.add_sku',function(){
        new_group_add_sku()
    })


    $('#new_group').on('click','.delete',function(){
      var row = $(this).parentsUntil('tbody','tr');
      var is_first_child = $(row).is(':first-child');
      if(is_first_child == true){
        $(row).find(':input').val('None');
      }else{
        $(row).remove();
      };
    })



    //calendar
    function buildCalendar(){

    };



    function load_calendar_data(start_date,end_date){
        return new Promise((resolve,reject) => {
            $.ajax({
                type: 'POST',
                url : "{{ url_for('main.load_calendar_data') }}",
                contentType: 'application/json;charset=UTF-8',
                data: JSON.stringify({'start_date':start_date,'end_date':end_date},null,'\t'),
                success: function(result){
                    resolve(result)
                },
                error: function (error) {
                    reject(error)
                }
            })
        });
    };



    function annotateCalendar(result){

      var visible_days = [];

      var visible_count = result['days'].length;

      for(i=0;i<visible_count;i++){
          var day = result['days'][i];
          var day = new Date(day).toISOString().substring(0,10)
          visible_days.push(day);
      };

      var first_visible_day = result['days'][0].toISOString().substring(0,10);
      var last_visible_day = result['days'][visible_count-1].toISOString().substring(0,10);


      load_calendar_data(start_day=first_visible_day,last_day=last_visible_day).then(result => {
          var cal_data = JSON.parse(result);
          var mabd_array = []

          td_idx = [];

          for(i=0;i<cal_data.length;i++){
              //console.log(i)
              var mabd_date = cal_data[i]
              //console.log(mabd_date)
              var mabd = mabd_date['MABD'];
              var foreign_id = mabd_date['Order ID'];
              var order_id = mabd_date['order_id'];
              var access_code = mabd_date['access_code'];
              var mabd = new Date(mabd).toISOString().substring(0,10)
              var idx = visible_days.indexOf(mabd);
              if(!td_idx.includes(idx)){
                  td_idx.push(idx);
                  $('#calendar td').eq(idx).append("<br><a href='#' data-bs-toggle='tooltip' data-bs-placement='bottom' title='Click to view orders!'><span><i class='fal fa-parachute-box mabd_icon' tool-tip-toggle='tooltip-demo' data-original-title='mabd'></i></span></a>");

              };

          };

          $('#calendar').on('click','.mabd_icon',function(){
              var clicked_date = $(this).parentsUntil('tr');
              // console.log(clicked_date)

              // console.log($('#calendar td'))

              var clicked_date_idx = $('#calendar td').index(clicked_date[2]);
              //console.log(clicked_date_idx)

              var date = visible_days[clicked_date_idx];

              var date_object = new Date(date);

              var date_string = date_object.toDateString()

              var list_orders = [];

              for(i=0;i<cal_data.length;i++){
                  var mabd_date = cal_data[i]
                  var mabd = mabd_date['MABD'].substring(0,10);
                  if(mabd == date){
                      var clean_order = {};

                      for(j=0;j<Object.values(mabd_date).length;j++){
                          var key = Object.keys(mabd_date)[j]
                          if(listOrdersModal_variables.includes(key) == true){
                              clean_order[key] = Object.values(mabd_date)[j]
                          };
                      };
                      list_orders.push(clean_order)
                  };
              };


              listOrdersModal.show()
              $('#modal_date').html(date_string)
              var modal_table_html = [];

              for(i=0;i<list_orders.length;i++){
                  var order = list_orders[i];
                  var order_html = '<td>'+order['Order ID']+'</td>';
                  var supplier_html = '<td>'+order['Supplier']+'</td>';
                  var sku_count_html = '<td>'+order['SKU Count']+'</td>';
                  var row_html = order_html+supplier_html+sku_count_html;
                  modal_table_html.push(row_html)
              }

              var modal_table_html = modal_table_html.join('')
              $('#list_orders_table > tbody').html(modal_table_html);

          })
      })};


//login
$('#login_submit').click(function(){
  validateLogin()
})

function validateLogin(){

      $('#login').find('form').children().not('.loading_spinner').addClass('hidden')
      $('#login').find('form').children('.loading_spinner').children().removeClass('hidden')

      $('#login').find('.type').find('div').not('.hidden').addClass('hidden');

      var username = $('#login_username').val();
      var username = username.toLowerCase()
      var psw = $('#login_psw').val();

      if(username.length == 0 ){
          $('#login').find('.type').find('.no_name').removeClass('hidden');
          $('#login').find('form').children().not('.loading_spinner').removeClass('hidden')
          $('#login').find('form').children('.loading_spinner').children().addClass('hidden')
      }else if(psw.length == 0){
          $('#login').find('.type').find('.no_name').addClass('hidden');
          $('#login').find('.type').find('.no_psw').removeClass('hidden');

          $('#login').find('form').children().not('.loading_spinner').removeClass('hidden')
          $('#login').find('form').children('.loading_spinner').children().addClass('hidden')

      }else{
          console.log('call ajax')
          $.ajax({
              type: 'POST',
              url: "{{ url_for('auth.post_login') }}",
              contentType: 'application/json;charset=UTF-8',
              data: JSON.stringify({'user_name':username,'psw':psw},null,'\t'),
              success: function(result){
                  $('#login').find('form').children().not('.loading_spinner').removeClass('hidden')
                  $('#login').find('form').children('.loading_spinner').children().addClass('hidden')
                  if(result == 'pass'){
                    window.location.href = "{{ url_for('main.index',view='dashboard') }}"
                  }else if(result == 'invalid'){
                      $('#login').find('.type').find('.invalid_username').removeClass('hidden');
                  }else if(result == 'email invalid'){
                      $('#login').find('.type').find('.invalid_email').removeClass('hidden');
                  }else if(result == 'unconfirmed'){
                      $('#login').find('.type').find('.unconfirmed').removeClass('hidden');
                  }else if(result == 'empty'){
                      $('#login').find('.type').find('.no_name').removeClass('hidden');
                  }else if(result == 'invalid password'){
                      $('#login').find('.type').find('.invalid_password').removeClass('hidden');
                  }else{
                      console.log('Error')
                  };

              }
          })
      };
    };

    //admin
    function buildAdmin(){

    }

    //general tables
    function edit_table(container_id){
      return new Promise((resolve,reject) => {
        formatSectionMoney(container_id)
        if($('#'+container_id).find('.advanced.static').is(':checked')){
            $('#'+container_id).find('.advanced').not('.static').removeClass('hidden');
        };

        resolve(container_id)
      })}
    //validate
    var validation_types = {'string':'string','name':'string','email':'email','street':'string','city':'string','phone':'phone','zip':'string','state':'string','country':'string','order':'string','date':'string','foreign_id':'string','pack_qty':'integer','quantity':'quantity','price':'string','cost':'string','text':'text','select_supplier':'string','select_company':'string','select_recipient':'string','select_sku':'string'}


    function validateForm(page){
        return new Promise((resolve,reject) => {
            var page_id = '#'+page;
            if(page == 'new_order'){
                if($('#new_order').find('#order_setup_ship_to_company').is(':checked')){
                  var inputs = $('#new_order').find(':input').not('.logo,.hidden,#order_setup_ship_to_company,:input[type=button],:input[readonly],.quantity,.status,#order_setup_select_recipient,.recipient');
                }else{
                  var inputs = $('#new_order').find(':input').not('.logo,.hidden,#order_setup_ship_to_company,:input[type=button],:input[readonly],.quantity,.status');
                };
            }else{
                var inputs = $(page_id).find(':input').not('button').not('.file');
            };
             console.log(inputs)

              var validation_classes = []
              var validation_results = [];

              for(i=0;i<inputs.length;i++){
                var input = $(inputs).eq(i)
                console.log(input)
                var classes = []
                for(j=0;j<Object.keys(validation_types).length;j++){
                    if($(input).hasClass(Object.keys(validation_types)[j])){
                        classes.push(Object.keys(validation_types)[j])
                    };
                };

                var validation_class = classes[0];

                validation_classes.push(validation_class);
                var validation_type = validation_types[validation_class];
                console.log(validation_type)

                if(validation_type == 'string'){
                    var result = validateString(input)
                }else if(validation_type == 'email'){
                    var result = validateEmail(input)
                }else if(validation_type == 'phone'){
                    var result = validatePhone(input)
                }else if(validation_type == 'integer'){
                    var result = validateInteger(input)
                }else if(validation_type == 'quantity'){
                    var result = validateQuantity(input)
                }else if(validation_type == 'text'){
                    var result = validateText(input)
                }else if(validation_type == 'psw'){
                  var result = validatePassword(input)
                }else{
                    var result = 'pass'
                };
                console.log(result)

                if(result == 'pass' && Object.keys(validation_types).includes(validation_type)){
                    console.log('testy')
                    input.addClass('is-valid')
                    input.removeClass('is-invalid')
                }else if(result == 'fail'){
                    input.addClass('is-invalid')
                    input.removeClass('is-valid')
                }else{
                    input.removeClass('is-valid')
                    input.removeClass('is-invalid')
                };

                validation_results.push(result);
              };
              console.log(validation_classes)
              console.log(validation_results)

              resolve(validation_results);
        })

    };

    function validateText(object){
      try{
        var string = $(object).val();
        var string_length = string.length;
      }catch(error){
        return 'pass'
      };

      if(string.length <= 100){
        return 'pass'
      }else{
        return 'fail'
      };

  };

    function validateString(object){
      try{
        var string = $(object).val();
        var string_length = string.length;
      }catch(error){
        return 'fail'
      };

      if(string.length > 0 && string != 'None'){
        return 'pass'
      }else{
        return 'fail'
      };

    };

      function validateStringSimple(object){
        return new Promise((resolve,reject) => {

          try{
            var string = $(object).val();
            var string_length = string.length;
          }catch(error){
            resolve('pass')
          };

          if(string.length <= 100){
            resolve('pass')
          }else{
            resolve('fail')
          };
        }).then(result => {
          validate(object,result)
        })
      };

    function validate(object,result){
        if(result == 'pass'){
          $(object).addClass('is-valid')
          $(object).removeClass('is-invalid')
        }else if(result =='fail'){
          $(object).addClass('is-invalid')
          $(object).removeClass('is-valid')
        }else{
          console.log('validation failed')
        }
      };

    function validateStringNotZero(object){
        return new Promise((resolve,reject) => {

          try{
            var string = $(object).val();
            var string_length = string.length;
          }catch(error){
            resolve('fail')
          };

          if(string.length > 0){
            resolve('pass')
          }else{
            resolve('fail')
          };
        }).then(result => {
          validate(object,result)
        })
      };

  function validateEmail(object){
    return new Promise((resolve,reject) => {
      try{
        var email = $(object).val();
        var email = email.toLowerCase();

        var reg_ex = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

        var validEmail = reg_ex.test(email);

        if(validEmail == true){
          resolve('pass')
        }else{
          resolve('fail')
        };

      }catch(error){
        resolve('fail')
      }}).then(result => {
        validate(object,result)
      })};


      function validatePhone(object){
        return new Promise((resolve) => {
          try{
            var phone = $(object).val();

            var reg_ex = /^(\+\d{1,2}\s)?\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}$/;

            var validPhone = reg_ex.test(phone);

            if(validPhone == true){
              resolve('pass')
            }else{
              resolve('fail')
            };

          }catch(error){
            resolve('fail')
          }}).then(result => {
            validate(object,result)
          })};


      function validateInteger(object){
        return new Promise((resolve) => {
          try{
            var integer = $(object).val();
            var integer = Number(integer);

            if(Number.isInteger(integer) == true && integer > 0){
              resolve('pass')
            }else{
              resolve('fail')
            }
          }catch(error){
            resolve('fail')
          }}).then(result => {
            validate(object,result)
          })};

      function validateQuantity(object){
        return new Promise((resolve) => {
          var input = $(object).parent();
          var input = $(input).parent();
          var row = $(input).parent();

          var pack_qty = $(row).children().find('.pack_qty').val();
          var quantity = $(object).val();


          try{
              var input = $(object).parent();
              var input = $(input).parent();
              var row = $(input).parent();

              var pack_qty = $(row).children().find('.pack_qty').val();
              var quantity = $(object).val();

              var pack_qty = Number(pack_qty);
              var quantity = Number(quantity);

              var result = quantity/pack_qty;

              if(Number.isInteger(result) == true && result > 0){
                resolve('pass')
          }else{
                resolve('fail')
              }
              }catch(error){
                resolve('fail')
              }}).then(result => {
                validate(object,result)
            })};


      function validateEverything(object){
        return new Promise((resolve) => { resolve('pass')
        }).then(result => {
            validate(object,result)
          })}

      function validateArray(object_array,test){
        try{
          var length = object_array.length;
          for(i=0;i<length;i++){
            var object = object_array[i]
            test(object);
          };
        }catch{
          console.log('fail')
        }
      };

      function confirmValidation(){
      return new Promise((resolve,reject) => {
        var invalid_elements = $('#po_form').find('.is-invalid');
        if(invalid_elements.length > 0){
          reject('invalid')
        }else{
          resolve('pass')
        }
      })
    }



    //document ready
    $(document).ready(function(){
        if('{{ user }}' != 'None'){
            buildPage();
            viewPage(object=null,page='dashboard',id=null)
        }else{
            viewPage(object=null,page='homepage',id=null)
        };
    })


</script>
{% endblock scripts %}
